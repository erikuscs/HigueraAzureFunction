"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generatePdf";
exports.ids = ["pages/api/generatePdf"];
exports.modules = {

/***/ "@azure/identity":
/*!**********************************!*\
  !*** external "@azure/identity" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("@azure/identity");

/***/ }),

/***/ "@azure/monitor-query":
/*!***************************************!*\
  !*** external "@azure/monitor-query" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("@azure/monitor-query");

/***/ }),

/***/ "@microsoft/microsoft-graph-client":
/*!****************************************************!*\
  !*** external "@microsoft/microsoft-graph-client" ***!
  \****************************************************/
/***/ ((module) => {

module.exports = require("@microsoft/microsoft-graph-client");

/***/ }),

/***/ "@microsoft/microsoft-graph-client/authProviders/azureTokenCredentials":
/*!****************************************************************************************!*\
  !*** external "@microsoft/microsoft-graph-client/authProviders/azureTokenCredentials" ***!
  \****************************************************************************************/
/***/ ((module) => {

module.exports = require("@microsoft/microsoft-graph-client/authProviders/azureTokenCredentials");

/***/ }),

/***/ "applicationinsights":
/*!**************************************!*\
  !*** external "applicationinsights" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("applicationinsights");

/***/ }),

/***/ "jspdf":
/*!************************!*\
  !*** external "jspdf" ***!
  \************************/
/***/ ((module) => {

module.exports = require("jspdf");

/***/ }),

/***/ "jspdf-autotable":
/*!**********************************!*\
  !*** external "jspdf-autotable" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("jspdf-autotable");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgeneratePdf&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FgeneratePdf.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgeneratePdf&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FgeneratePdf.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_generatePdf_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/generatePdf.js */ \"(api)/./pages/api/generatePdf.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generatePdf_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generatePdf_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generatePdf\",\n        pathname: \"/api/generatePdf\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_generatePdf_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlUGRmJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZnZW5lcmF0ZVBkZi5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN1RDtBQUN2RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsc0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHNEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2hpZ3VlcmFhenVyZWZ1bmN0aW9uLz9mZGQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvZ2VuZXJhdGVQZGYuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZVBkZlwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlUGRmXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgeneratePdf&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FgeneratePdf.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/monitoringService.ts":
/*!**********************************!*\
  !*** ./lib/monitoringService.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   queryLogs: () => (/* binding */ queryLogs),\n/* harmony export */   startOperation: () => (/* binding */ startOperation),\n/* harmony export */   stopOperation: () => (/* binding */ stopOperation),\n/* harmony export */   trackDependency: () => (/* binding */ trackDependency),\n/* harmony export */   trackEvent: () => (/* binding */ trackEvent),\n/* harmony export */   trackException: () => (/* binding */ trackException),\n/* harmony export */   trackMetric: () => (/* binding */ trackMetric),\n/* harmony export */   trackRequest: () => (/* binding */ trackRequest)\n/* harmony export */ });\n// Use dynamic imports for server-only modules\n// These modules will only be imported on the server\n// Import placeholders for server-side modules\nlet appInsightsModule = null;\nlet DefaultAzureCredentialClass = null;\nlet LogAnalyticsClientClass = null;\n// Only import server-side modules when running on the server\nif (true) {\n    try {\n        appInsightsModule = __webpack_require__(/*! applicationinsights */ \"applicationinsights\");\n        const { DefaultAzureCredential } = __webpack_require__(/*! @azure/identity */ \"@azure/identity\");\n        const { LogAnalyticsClient } = __webpack_require__(/*! @azure/monitor-query */ \"@azure/monitor-query\");\n        DefaultAzureCredentialClass = DefaultAzureCredential;\n        LogAnalyticsClientClass = LogAnalyticsClient;\n    } catch (error) {\n        console.error(\"Error importing server-side modules:\", error);\n    }\n}\nclass MonitoringService {\n    constructor(){\n        this.initialized = false;\n        if (true) {\n            this.initializeAppInsights();\n            this.initializeLogAnalytics();\n        }\n    }\n    static getInstance() {\n        if (!MonitoringService.instance) {\n            MonitoringService.instance = new MonitoringService();\n        }\n        return MonitoringService.instance;\n    }\n    initializeAppInsights() {\n        if (!this.initialized && process.env.APPLICATIONINSIGHTS_CONNECTION_STRING && appInsightsModule) {\n            appInsightsModule.setup(process.env.APPLICATIONINSIGHTS_CONNECTION_STRING).setAutoDependencyCorrelation(true).setAutoCollectRequests(true).setAutoCollectPerformance(true).setAutoCollectExceptions(true).setAutoCollectDependencies(true).setAutoCollectConsole(true).setUseDiskRetryCaching(true).setSendLiveMetrics(true).setDistributedTracingMode(appInsightsModule.DistributedTracingModes.AI_AND_W3C);\n            appInsightsModule.defaultClient.context.tags[appInsightsModule.defaultClient.context.keys.cloudRole] = \"HigueraFunction\";\n            appInsightsModule.start();\n            this.client = appInsightsModule.defaultClient;\n            this.initialized = true;\n        }\n    }\n    initializeLogAnalytics() {\n        if (DefaultAzureCredentialClass && LogAnalyticsClientClass) {\n            try {\n                const credential = new DefaultAzureCredentialClass();\n                this.logAnalyticsClient = new LogAnalyticsClientClass(credential);\n            } catch (error) {\n                console.error(\"Error initializing Log Analytics client:\", error);\n            }\n        }\n    }\n    trackException(error, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                errorName: error.name,\n                stackTrace: error.stack,\n                timestamp: new Date().toISOString()\n            };\n            this.client.trackException({\n                exception: error,\n                properties: enhancedProperties\n            });\n        } catch (error) {\n            console.error(\"Error tracking exception:\", error);\n        }\n    }\n    trackEvent(name, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                timestamp: new Date().toISOString(),\n                environment: process.env.AZURE_ENVIRONMENT || \"development\"\n            };\n            this.client.trackEvent({\n                name,\n                properties: enhancedProperties\n            });\n        } catch (error) {\n            console.error(\"Error tracking event:\", error);\n        }\n    }\n    trackMetric(name, value, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                timestamp: new Date().toISOString(),\n                environment: process.env.AZURE_ENVIRONMENT || \"development\"\n            };\n            this.client.trackMetric({\n                name,\n                value,\n                properties: enhancedProperties\n            });\n        } catch (error) {\n            console.error(\"Error tracking metric:\", error);\n        }\n    }\n    trackRequest(name, url, duration, success, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                timestamp: new Date().toISOString(),\n                environment: process.env.AZURE_ENVIRONMENT || \"development\"\n            };\n            this.client.trackRequest({\n                name,\n                url,\n                duration,\n                success,\n                properties: enhancedProperties\n            });\n        } catch (error) {\n            console.error(\"Error tracking request:\", error);\n        }\n    }\n    trackDependency(name, data, duration, success, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                timestamp: new Date().toISOString(),\n                environment: process.env.AZURE_ENVIRONMENT || \"development\"\n            };\n            this.client.trackDependency({\n                name,\n                data,\n                duration,\n                success,\n                properties: enhancedProperties,\n                dependencyTypeName: \"HTTP\"\n            });\n        } catch (error) {\n            console.error(\"Error tracking dependency:\", error);\n        }\n    }\n    async queryLogs(query, timeRange) {\n        if ( false || !this.logAnalyticsClient) {\n            return null; // Skip on client-side\n        }\n        try {\n            const workspaceId = process.env.LOG_ANALYTICS_WORKSPACE_ID;\n            if (!workspaceId) {\n                throw new Error(\"LOG_ANALYTICS_WORKSPACE_ID not configured\");\n            }\n            const result = await this.logAnalyticsClient.queryWorkspace(workspaceId, query, {\n                timeRange\n            });\n            return result;\n        } catch (error) {\n            if (this.initialized) {\n                this.trackException(error, {\n                    operation: \"queryLogs\"\n                });\n            }\n            throw error;\n        }\n    }\n    startOperation(name) {\n        if ( false || !this.initialized) {\n            return null; // Skip on client-side\n        }\n        try {\n            return this.client.startOperation({\n                name\n            });\n        } catch (error) {\n            console.error(\"Error starting operation:\", error);\n            return null;\n        }\n    }\n    stopOperation(operation) {\n        if ( false || !this.initialized || !operation) {\n            return; // Skip on client-side\n        }\n        try {\n            this.client.stopOperation(operation);\n        } catch (error) {\n            console.error(\"Error stopping operation:\", error);\n        }\n    }\n}\n// Export singleton instance methods\nconst monitoringService = MonitoringService.getInstance();\nconst trackException = (error, properties)=>monitoringService.trackException(error, properties);\nconst trackEvent = (name, properties)=>monitoringService.trackEvent(name, properties);\nconst trackMetric = (name, value, properties)=>monitoringService.trackMetric(name, value, properties);\nconst trackRequest = (name, url, duration, success, properties)=>monitoringService.trackRequest(name, url, duration, success, properties);\nconst trackDependency = (name, data, duration, success, properties)=>monitoringService.trackDependency(name, data, duration, success, properties);\nconst queryLogs = (query, timeRange)=>monitoringService.queryLogs(query, timeRange);\nconst startOperation = (name)=>monitoringService.startOperation(name);\nconst stopOperation = (operation)=>monitoringService.stopOperation(operation);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ1AsTUFBTUgsWUFBWTtBQUU1QyxNQUFNYSxjQUFjLENBQUNWLE1BQWNXLE9BQWVkLGFBQ3JEaUMsa0JBQWtCcEIsV0FBVyxDQUFDVixNQUFNVyxPQUFPZCxZQUFZO0FBRXBELE1BQU1lLGVBQWUsQ0FBQ1osTUFBY2EsS0FBYUMsVUFBa0JDLFNBQWtCbEIsYUFDeEZpQyxrQkFBa0JsQixZQUFZLENBQUNaLE1BQU1hLEtBQUtDLFVBQVVDLFNBQVNsQixZQUFZO0FBRXRFLE1BQU1tQixrQkFBa0IsQ0FBQ2hCLE1BQWNpQixNQUFjSCxVQUFrQkMsU0FBa0JsQixhQUM1RmlDLGtCQUFrQmQsZUFBZSxDQUFDaEIsTUFBTWlCLE1BQU1ILFVBQVVDLFNBQVNsQixZQUFZO0FBRTFFLE1BQU1zQixZQUFZLENBQUNDLE9BQWVDLFlBQ3JDUyxrQkFBa0JYLFNBQVMsQ0FBQ0MsT0FBT0MsV0FBVztBQUUzQyxNQUFNTyxpQkFBaUIsQ0FBQzVCLE9BQzNCOEIsa0JBQWtCRixjQUFjLENBQUM1QixNQUFNO0FBRXBDLE1BQU02QixnQkFBZ0IsQ0FBQ0YsWUFDMUJHLGtCQUFrQkQsYUFBYSxDQUFDRixXQUFXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlndWVyYWF6dXJlZnVuY3Rpb24vLi9saWIvbW9uaXRvcmluZ1NlcnZpY2UudHM/ODhkZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBVc2UgZHluYW1pYyBpbXBvcnRzIGZvciBzZXJ2ZXItb25seSBtb2R1bGVzXG4vLyBUaGVzZSBtb2R1bGVzIHdpbGwgb25seSBiZSBpbXBvcnRlZCBvbiB0aGUgc2VydmVyXG5cbi8vIEltcG9ydCBwbGFjZWhvbGRlcnMgZm9yIHNlcnZlci1zaWRlIG1vZHVsZXNcbmxldCBhcHBJbnNpZ2h0c01vZHVsZTogYW55ID0gbnVsbDtcbmxldCBEZWZhdWx0QXp1cmVDcmVkZW50aWFsQ2xhc3M6IGFueSA9IG51bGw7XG5sZXQgTG9nQW5hbHl0aWNzQ2xpZW50Q2xhc3M6IGFueSA9IG51bGw7XG5cbi8vIE9ubHkgaW1wb3J0IHNlcnZlci1zaWRlIG1vZHVsZXMgd2hlbiBydW5uaW5nIG9uIHRoZSBzZXJ2ZXJcbmlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICB0cnkge1xuICAgIGFwcEluc2lnaHRzTW9kdWxlID0gcmVxdWlyZSgnYXBwbGljYXRpb25pbnNpZ2h0cycpO1xuICAgIGNvbnN0IHsgRGVmYXVsdEF6dXJlQ3JlZGVudGlhbCB9ID0gcmVxdWlyZSgnQGF6dXJlL2lkZW50aXR5Jyk7XG4gICAgY29uc3QgeyBMb2dBbmFseXRpY3NDbGllbnQgfSA9IHJlcXVpcmUoJ0BhenVyZS9tb25pdG9yLXF1ZXJ5Jyk7XG4gICAgXG4gICAgRGVmYXVsdEF6dXJlQ3JlZGVudGlhbENsYXNzID0gRGVmYXVsdEF6dXJlQ3JlZGVudGlhbDtcbiAgICBMb2dBbmFseXRpY3NDbGllbnRDbGFzcyA9IExvZ0FuYWx5dGljc0NsaWVudDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbXBvcnRpbmcgc2VydmVyLXNpZGUgbW9kdWxlczonLCBlcnJvcik7XG4gIH1cbn1cblxuY2xhc3MgTW9uaXRvcmluZ1NlcnZpY2Uge1xuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBNb25pdG9yaW5nU2VydmljZTtcbiAgICBwcml2YXRlIGNsaWVudDogYW55O1xuICAgIHByaXZhdGUgbG9nQW5hbHl0aWNzQ2xpZW50OiBhbnk7XG4gICAgcHJpdmF0ZSBpbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVBcHBJbnNpZ2h0cygpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplTG9nQW5hbHl0aWNzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IE1vbml0b3JpbmdTZXJ2aWNlIHtcbiAgICAgICAgaWYgKCFNb25pdG9yaW5nU2VydmljZS5pbnN0YW5jZSkge1xuICAgICAgICAgICAgTW9uaXRvcmluZ1NlcnZpY2UuaW5zdGFuY2UgPSBuZXcgTW9uaXRvcmluZ1NlcnZpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTW9uaXRvcmluZ1NlcnZpY2UuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplQXBwSW5zaWdodHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCAmJiBwcm9jZXNzLmVudi5BUFBMSUNBVElPTklOU0lHSFRTX0NPTk5FQ1RJT05fU1RSSU5HICYmIGFwcEluc2lnaHRzTW9kdWxlKSB7XG4gICAgICAgICAgICBhcHBJbnNpZ2h0c01vZHVsZS5zZXR1cChwcm9jZXNzLmVudi5BUFBMSUNBVElPTklOU0lHSFRTX0NPTk5FQ1RJT05fU1RSSU5HKVxuICAgICAgICAgICAgICAgIC5zZXRBdXRvRGVwZW5kZW5jeUNvcnJlbGF0aW9uKHRydWUpXG4gICAgICAgICAgICAgICAgLnNldEF1dG9Db2xsZWN0UmVxdWVzdHModHJ1ZSlcbiAgICAgICAgICAgICAgICAuc2V0QXV0b0NvbGxlY3RQZXJmb3JtYW5jZSh0cnVlKVxuICAgICAgICAgICAgICAgIC5zZXRBdXRvQ29sbGVjdEV4Y2VwdGlvbnModHJ1ZSlcbiAgICAgICAgICAgICAgICAuc2V0QXV0b0NvbGxlY3REZXBlbmRlbmNpZXModHJ1ZSlcbiAgICAgICAgICAgICAgICAuc2V0QXV0b0NvbGxlY3RDb25zb2xlKHRydWUpXG4gICAgICAgICAgICAgICAgLnNldFVzZURpc2tSZXRyeUNhY2hpbmcodHJ1ZSlcbiAgICAgICAgICAgICAgICAuc2V0U2VuZExpdmVNZXRyaWNzKHRydWUpXG4gICAgICAgICAgICAgICAgLnNldERpc3RyaWJ1dGVkVHJhY2luZ01vZGUoYXBwSW5zaWdodHNNb2R1bGUuRGlzdHJpYnV0ZWRUcmFjaW5nTW9kZXMuQUlfQU5EX1czQyk7XG5cbiAgICAgICAgICAgIGFwcEluc2lnaHRzTW9kdWxlLmRlZmF1bHRDbGllbnQuY29udGV4dC50YWdzW2FwcEluc2lnaHRzTW9kdWxlLmRlZmF1bHRDbGllbnQuY29udGV4dC5rZXlzLmNsb3VkUm9sZV0gPSBcIkhpZ3VlcmFGdW5jdGlvblwiO1xuICAgICAgICAgICAgYXBwSW5zaWdodHNNb2R1bGUuc3RhcnQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBhcHBJbnNpZ2h0c01vZHVsZS5kZWZhdWx0Q2xpZW50O1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRpYWxpemVMb2dBbmFseXRpY3MoKSB7XG4gICAgICAgIGlmIChEZWZhdWx0QXp1cmVDcmVkZW50aWFsQ2xhc3MgJiYgTG9nQW5hbHl0aWNzQ2xpZW50Q2xhc3MpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IG5ldyBEZWZhdWx0QXp1cmVDcmVkZW50aWFsQ2xhc3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0FuYWx5dGljc0NsaWVudCA9IG5ldyBMb2dBbmFseXRpY3NDbGllbnRDbGFzcyhjcmVkZW50aWFsKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5pdGlhbGl6aW5nIExvZyBBbmFseXRpY3MgY2xpZW50OicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB0cmFja0V4Y2VwdGlvbihlcnJvcjogRXJyb3IsIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCAhdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIG9uIGNsaWVudC1zaWRlXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZW5oYW5jZWRQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgZXJyb3JOYW1lOiBlcnJvci5uYW1lLFxuICAgICAgICAgICAgICAgIHN0YWNrVHJhY2U6IGVycm9yLnN0YWNrLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmNsaWVudC50cmFja0V4Y2VwdGlvbih7XG4gICAgICAgICAgICAgICAgZXhjZXB0aW9uOiBlcnJvcixcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBlbmhhbmNlZFByb3BlcnRpZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJhY2tpbmcgZXhjZXB0aW9uOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB0cmFja0V2ZW50KG5hbWU6IHN0cmluZywgcHJvcGVydGllcz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnIHx8ICF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIFNraXAgb24gY2xpZW50LXNpZGVcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbmhhbmNlZFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuQVpVUkVfRU5WSVJPTk1FTlQgfHwgJ2RldmVsb3BtZW50J1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jbGllbnQudHJhY2tFdmVudCh7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBlbmhhbmNlZFByb3BlcnRpZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJhY2tpbmcgZXZlbnQ6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHRyYWNrTWV0cmljKG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciwgcHJvcGVydGllcz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnIHx8ICF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIFNraXAgb24gY2xpZW50LXNpZGVcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbmhhbmNlZFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuQVpVUkVfRU5WSVJPTk1FTlQgfHwgJ2RldmVsb3BtZW50J1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jbGllbnQudHJhY2tNZXRyaWMoe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczogZW5oYW5jZWRQcm9wZXJ0aWVzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHRyYWNraW5nIG1ldHJpYzonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdHJhY2tSZXF1ZXN0KG5hbWU6IHN0cmluZywgdXJsOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIsIHN1Y2Nlc3M6IGJvb2xlYW4sIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCAhdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIG9uIGNsaWVudC1zaWRlXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZW5oYW5jZWRQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52LkFaVVJFX0VOVklST05NRU5UIHx8ICdkZXZlbG9wbWVudCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY2xpZW50LnRyYWNrUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgc3VjY2VzcyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBlbmhhbmNlZFByb3BlcnRpZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJhY2tpbmcgcmVxdWVzdDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdHJhY2tEZXBlbmRlbmN5KG5hbWU6IHN0cmluZywgZGF0YTogc3RyaW5nLCBkdXJhdGlvbjogbnVtYmVyLCBzdWNjZXNzOiBib29sZWFuLCBwcm9wZXJ0aWVzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgfHwgIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gU2tpcCBvbiBjbGllbnQtc2lkZVxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGVuaGFuY2VkUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICAuLi5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5BWlVSRV9FTlZJUk9OTUVOVCB8fCAnZGV2ZWxvcG1lbnQnXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmNsaWVudC50cmFja0RlcGVuZGVuY3koe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICBzdWNjZXNzLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IGVuaGFuY2VkUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmN5VHlwZU5hbWU6IFwiSFRUUFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHRyYWNraW5nIGRlcGVuZGVuY3k6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHF1ZXJ5TG9ncyhxdWVyeTogc3RyaW5nLCB0aW1lUmFuZ2U6IHsgc3RhcnQ6IERhdGU7IGVuZDogRGF0ZSB9KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCAhdGhpcy5sb2dBbmFseXRpY3NDbGllbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBTa2lwIG9uIGNsaWVudC1zaWRlXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgd29ya3NwYWNlSWQgPSBwcm9jZXNzLmVudi5MT0dfQU5BTFlUSUNTX1dPUktTUEFDRV9JRDtcbiAgICAgICAgICAgIGlmICghd29ya3NwYWNlSWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xPR19BTkFMWVRJQ1NfV09SS1NQQUNFX0lEIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubG9nQW5hbHl0aWNzQ2xpZW50LnF1ZXJ5V29ya3NwYWNlKFxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUlkLFxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgICAgIHsgdGltZVJhbmdlIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tFeGNlcHRpb24oZXJyb3IgYXMgRXJyb3IsIHsgb3BlcmF0aW9uOiAncXVlcnlMb2dzJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0T3BlcmF0aW9uKG5hbWU6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCAhdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFNraXAgb24gY2xpZW50LXNpZGVcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQuc3RhcnRPcGVyYXRpb24oeyBuYW1lIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhcnRpbmcgb3BlcmF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0b3BPcGVyYXRpb24ob3BlcmF0aW9uOiBhbnkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnIHx8ICF0aGlzLmluaXRpYWxpemVkIHx8ICFvcGVyYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gU2tpcCBvbiBjbGllbnQtc2lkZVxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LnN0b3BPcGVyYXRpb24ob3BlcmF0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0b3BwaW5nIG9wZXJhdGlvbjonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2UgbWV0aG9kc1xuY29uc3QgbW9uaXRvcmluZ1NlcnZpY2UgPSBNb25pdG9yaW5nU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuXG5leHBvcnQgY29uc3QgdHJhY2tFeGNlcHRpb24gPSAoZXJyb3I6IEVycm9yLCBwcm9wZXJ0aWVzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkgPT4gXG4gICAgbW9uaXRvcmluZ1NlcnZpY2UudHJhY2tFeGNlcHRpb24oZXJyb3IsIHByb3BlcnRpZXMpO1xuXG5leHBvcnQgY29uc3QgdHJhY2tFdmVudCA9IChuYW1lOiBzdHJpbmcsIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSA9PiBcbiAgICBtb25pdG9yaW5nU2VydmljZS50cmFja0V2ZW50KG5hbWUsIHByb3BlcnRpZXMpO1xuXG5leHBvcnQgY29uc3QgdHJhY2tNZXRyaWMgPSAobmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyLCBwcm9wZXJ0aWVzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkgPT4gXG4gICAgbW9uaXRvcmluZ1NlcnZpY2UudHJhY2tNZXRyaWMobmFtZSwgdmFsdWUsIHByb3BlcnRpZXMpO1xuXG5leHBvcnQgY29uc3QgdHJhY2tSZXF1ZXN0ID0gKG5hbWU6IHN0cmluZywgdXJsOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIsIHN1Y2Nlc3M6IGJvb2xlYW4sIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSA9PiBcbiAgICBtb25pdG9yaW5nU2VydmljZS50cmFja1JlcXVlc3QobmFtZSwgdXJsLCBkdXJhdGlvbiwgc3VjY2VzcywgcHJvcGVydGllcyk7XG5cbmV4cG9ydCBjb25zdCB0cmFja0RlcGVuZGVuY3kgPSAobmFtZTogc3RyaW5nLCBkYXRhOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIsIHN1Y2Nlc3M6IGJvb2xlYW4sIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSA9PiBcbiAgICBtb25pdG9yaW5nU2VydmljZS50cmFja0RlcGVuZGVuY3kobmFtZSwgZGF0YSwgZHVyYXRpb24sIHN1Y2Nlc3MsIHByb3BlcnRpZXMpO1xuXG5leHBvcnQgY29uc3QgcXVlcnlMb2dzID0gKHF1ZXJ5OiBzdHJpbmcsIHRpbWVSYW5nZTogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH0pID0+IFxuICAgIG1vbml0b3JpbmdTZXJ2aWNlLnF1ZXJ5TG9ncyhxdWVyeSwgdGltZVJhbmdlKTtcblxuZXhwb3J0IGNvbnN0IHN0YXJ0T3BlcmF0aW9uID0gKG5hbWU6IHN0cmluZykgPT4gXG4gICAgbW9uaXRvcmluZ1NlcnZpY2Uuc3RhcnRPcGVyYXRpb24obmFtZSk7XG5cbmV4cG9ydCBjb25zdCBzdG9wT3BlcmF0aW9uID0gKG9wZXJhdGlvbjogYW55KSA9PiBcbiAgICBtb25pdG9yaW5nU2VydmljZS5zdG9wT3BlcmF0aW9uKG9wZXJhdGlvbik7Il0sIm5hbWVzIjpbImFwcEluc2lnaHRzTW9kdWxlIiwiRGVmYXVsdEF6dXJlQ3JlZGVudGlhbENsYXNzIiwiTG9nQW5hbHl0aWNzQ2xpZW50Q2xhc3MiLCJyZXF1aXJlIiwiRGVmYXVsdEF6dXJlQ3JlZGVudGlhbCIsIkxvZ0FuYWx5dGljc0NsaWVudCIsImVycm9yIiwiY29uc29sZSIsIk1vbml0b3JpbmdTZXJ2aWNlIiwiaW5pdGlhbGl6ZWQiLCJpbml0aWFsaXplQXBwSW5zaWdodHMiLCJpbml0aWFsaXplTG9nQW5hbHl0aWNzIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsInByb2Nlc3MiLCJlbnYiLCJBUFBMSUNBVElPTklOU0lHSFRTX0NPTk5FQ1RJT05fU1RSSU5HIiwic2V0dXAiLCJzZXRBdXRvRGVwZW5kZW5jeUNvcnJlbGF0aW9uIiwic2V0QXV0b0NvbGxlY3RSZXF1ZXN0cyIsInNldEF1dG9Db2xsZWN0UGVyZm9ybWFuY2UiLCJzZXRBdXRvQ29sbGVjdEV4Y2VwdGlvbnMiLCJzZXRBdXRvQ29sbGVjdERlcGVuZGVuY2llcyIsInNldEF1dG9Db2xsZWN0Q29uc29sZSIsInNldFVzZURpc2tSZXRyeUNhY2hpbmciLCJzZXRTZW5kTGl2ZU1ldHJpY3MiLCJzZXREaXN0cmlidXRlZFRyYWNpbmdNb2RlIiwiRGlzdHJpYnV0ZWRUcmFjaW5nTW9kZXMiLCJBSV9BTkRfVzNDIiwiZGVmYXVsdENsaWVudCIsImNvbnRleHQiLCJ0YWdzIiwia2V5cyIsImNsb3VkUm9sZSIsInN0YXJ0IiwiY2xpZW50IiwiY3JlZGVudGlhbCIsImxvZ0FuYWx5dGljc0NsaWVudCIsInRyYWNrRXhjZXB0aW9uIiwicHJvcGVydGllcyIsImVuaGFuY2VkUHJvcGVydGllcyIsImVycm9yTmFtZSIsIm5hbWUiLCJzdGFja1RyYWNlIiwic3RhY2siLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJleGNlcHRpb24iLCJ0cmFja0V2ZW50IiwiZW52aXJvbm1lbnQiLCJBWlVSRV9FTlZJUk9OTUVOVCIsInRyYWNrTWV0cmljIiwidmFsdWUiLCJ0cmFja1JlcXVlc3QiLCJ1cmwiLCJkdXJhdGlvbiIsInN1Y2Nlc3MiLCJ0cmFja0RlcGVuZGVuY3kiLCJkYXRhIiwiZGVwZW5kZW5jeVR5cGVOYW1lIiwicXVlcnlMb2dzIiwicXVlcnkiLCJ0aW1lUmFuZ2UiLCJ3b3Jrc3BhY2VJZCIsIkxPR19BTkFMWVRJQ1NfV09SS1NQQUNFX0lEIiwiRXJyb3IiLCJyZXN1bHQiLCJxdWVyeVdvcmtzcGFjZSIsIm9wZXJhdGlvbiIsInN0YXJ0T3BlcmF0aW9uIiwic3RvcE9wZXJhdGlvbiIsIm1vbml0b3JpbmdTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/monitoringService.ts\n");

/***/ }),

/***/ "(api)/./pages/api/generatePdf.js":
/*!**********************************!*\
  !*** ./pages/api/generatePdf.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_monitoringService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/monitoringService */ \"(api)/./lib/monitoringService.ts\");\n// Server-only modules that will be imported conditionally\nlet MSGraphClient = null;\nlet TokenCredentialAuthProvider = null;\nlet DefaultAzureCredentialClass = null;\nlet jsPDFModule = null;\n// Only import server-side modules when running on the server\nif (true) {\n    try {\n        const { Client } = __webpack_require__(/*! @microsoft/microsoft-graph-client */ \"@microsoft/microsoft-graph-client\");\n        const { TokenCredentialAuthenticationProvider } = __webpack_require__(/*! @microsoft/microsoft-graph-client/authProviders/azureTokenCredentials */ \"@microsoft/microsoft-graph-client/authProviders/azureTokenCredentials\");\n        const { DefaultAzureCredential } = __webpack_require__(/*! @azure/identity */ \"@azure/identity\");\n        const jsPDF = __webpack_require__(/*! jspdf */ \"jspdf\");\n        __webpack_require__(/*! jspdf-autotable */ \"jspdf-autotable\");\n        MSGraphClient = Client;\n        TokenCredentialAuthProvider = TokenCredentialAuthenticationProvider;\n        DefaultAzureCredentialClass = DefaultAzureCredential;\n        jsPDFModule = jsPDF;\n    } catch (error) {\n        console.error(\"Error importing server-side modules:\", error);\n    }\n}\n\n// Utility function for consistent currency formatting - DO NOT REMOVE OR DUPLICATE\nfunction formatCurrency(number) {\n    return new Intl.NumberFormat(\"en-US\", {\n        style: \"currency\",\n        currency: \"USD\",\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0\n    }).format(number);\n}\nasync function handler(req, res) {\n    // This is an API route, which only runs on the server side\n    // But we still need to ensure the imports worked correctly\n    if (!jsPDFModule) {\n        return res.status(500).json({\n            error: \"Server-side modules not available\"\n        });\n    }\n    const startTime = performance.now();\n    try {\n        if (req.method !== \"POST\") {\n            throw new Error(\"Method not allowed\");\n        }\n        const { dashboardData, filters } = req.body;\n        if (!dashboardData) {\n            throw new Error(\"No dashboard data provided\");\n        }\n        const doc = new jsPDFModule();\n        // Header\n        doc.setFontSize(20);\n        doc.setTextColor(0, 51, 102);\n        doc.text(\"Higuera Project - Executive Summary\", 14, 20);\n        doc.setFontSize(10);\n        doc.setTextColor(100, 100, 100);\n        doc.text(`Generated on ${new Date().toLocaleDateString()}`, 14, 28);\n        if (filters && (filters.week || filters.system)) {\n            doc.text(`Filters: ${filters.week ? \"Week: \" + filters.week : \"\"} ${filters.system ? \"System: \" + filters.system : \"\"}`, 14, 35);\n        }\n        // KPIs\n        doc.setFontSize(14);\n        doc.setTextColor(0, 51, 102);\n        doc.text(\"Key Metrics\", 14, 45);\n        doc.autoTable({\n            startY: 50,\n            head: [\n                [\n                    \"Metric\",\n                    \"Value\"\n                ]\n            ],\n            body: [\n                [\n                    \"Total Budget\",\n                    formatCurrency(dashboardData.kpis.totalBudget)\n                ],\n                [\n                    \"Spent\",\n                    formatCurrency(dashboardData.kpis.spent)\n                ],\n                [\n                    \"Remaining\",\n                    formatCurrency(dashboardData.kpis.remaining)\n                ],\n                [\n                    \"Overrun Risk\",\n                    dashboardData.kpis.risk\n                ]\n            ],\n            theme: \"grid\",\n            headStyles: {\n                fillColor: [\n                    0,\n                    51,\n                    102\n                ]\n            }\n        });\n        // Hours Tracking section (new)\n        if (dashboardData.hoursTracking) {\n            const hoursY = doc.lastAutoTable.finalY + 15;\n            doc.setFontSize(14);\n            doc.setTextColor(0, 51, 102);\n            doc.text(\"Hours Tracking & Projections\", 14, hoursY);\n            doc.autoTable({\n                startY: hoursY + 5,\n                head: [\n                    [\n                        \"Metric\",\n                        \"Value\"\n                    ]\n                ],\n                body: [\n                    [\n                        \"Total Hours Allocated\",\n                        dashboardData.hoursTracking.totalHoursAllocated\n                    ],\n                    [\n                        \"Hours Used\",\n                        dashboardData.hoursTracking.totalHoursUsed\n                    ],\n                    [\n                        \"Hours Remaining\",\n                        dashboardData.hoursTracking.completionMetrics.hoursRemaining\n                    ],\n                    [\n                        \"Completion Percentage\",\n                        `${dashboardData.hoursTracking.completionMetrics.percentageComplete}%`\n                    ],\n                    [\n                        \"Planned End Date\",\n                        new Date(dashboardData.hoursTracking.plannedEndDate).toLocaleDateString()\n                    ],\n                    [\n                        \"Projected End Date\",\n                        new Date(dashboardData.hoursTracking.projectedEndDate).toLocaleDateString()\n                    ],\n                    [\n                        \"Estimated Weeks Remaining\",\n                        dashboardData.hoursTracking.completionMetrics.estimatedWeeksRemaining.toFixed(1)\n                    ]\n                ],\n                theme: \"grid\",\n                headStyles: {\n                    fillColor: [\n                        0,\n                        51,\n                        102\n                    ]\n                }\n            });\n        }\n        // Schedule Status\n        const scheduleY = doc.lastAutoTable.finalY + 15;\n        doc.setFontSize(14);\n        doc.setTextColor(0, 51, 102);\n        doc.text(\"Schedule Status\", 14, scheduleY);\n        doc.autoTable({\n            startY: scheduleY + 5,\n            head: [\n                [\n                    \"Task\",\n                    \"Planned %\",\n                    \"Actual %\"\n                ]\n            ],\n            body: dashboardData.schedule.map((item)=>[\n                    item.task,\n                    item.Planned,\n                    item.Actual\n                ]),\n            theme: \"grid\",\n            headStyles: {\n                fillColor: [\n                    0,\n                    51,\n                    102\n                ]\n            }\n        });\n        // Issues\n        if (doc.lastAutoTable.finalY > 230) {\n            doc.addPage();\n            doc.setFontSize(14);\n            doc.setTextColor(0, 51, 102);\n            doc.text(\"Recent Issues\", 14, 20);\n            doc.autoTable({\n                startY: 25,\n                head: [\n                    [\n                        \"Date\",\n                        \"System\",\n                        \"Issue\",\n                        \"Impact\",\n                        \"Accountability\"\n                    ]\n                ],\n                body: (filters.system ? dashboardData.issues.filter((i)=>i.system === filters.system) : dashboardData.issues).map((item)=>[\n                        item.date,\n                        item.system,\n                        item.issue,\n                        item.impact,\n                        item.accountability\n                    ]),\n                theme: \"grid\",\n                headStyles: {\n                    fillColor: [\n                        0,\n                        51,\n                        102\n                    ]\n                }\n            });\n        } else {\n            const issuesY = doc.lastAutoTable.finalY + 15;\n            doc.setFontSize(14);\n            doc.setTextColor(0, 51, 102);\n            doc.text(\"Recent Issues\", 14, issuesY);\n            doc.autoTable({\n                startY: issuesY + 5,\n                head: [\n                    [\n                        \"Date\",\n                        \"System\",\n                        \"Issue\",\n                        \"Impact\",\n                        \"Accountability\"\n                    ]\n                ],\n                body: (filters.system ? dashboardData.issues.filter((i)=>i.system === filters.system) : dashboardData.issues).map((item)=>[\n                        item.date,\n                        item.system,\n                        item.issue,\n                        item.impact,\n                        item.accountability\n                    ]),\n                theme: \"grid\",\n                headStyles: {\n                    fillColor: [\n                        0,\n                        51,\n                        102\n                    ]\n                }\n            });\n        }\n        // Footer\n        const pageCount = doc.internal.getNumberOfPages();\n        for(let i = 1; i <= pageCount; i++){\n            doc.setPage(i);\n            doc.setFontSize(8);\n            doc.setTextColor(150, 150, 150);\n            doc.text(`Higuera Project - Page ${i} of ${pageCount}`, 14, doc.internal.pageSize.height - 10);\n            doc.text(`Confidential - Ayala Development Inc.`, doc.internal.pageSize.width - 65, doc.internal.pageSize.height - 10);\n        }\n        const duration = performance.now() - startTime;\n        (0,_lib_monitoringService__WEBPACK_IMPORTED_MODULE_0__.trackMetric)(\"pdfGenerationDuration\", duration);\n        // Send the PDF\n        const pdfBuffer = Buffer.from(doc.output(\"arraybuffer\"));\n        res.setHeader(\"Content-Type\", \"application/pdf\");\n        res.setHeader(\"Content-Disposition\", `attachment; filename=higuera-summary-${new Date().toISOString().split(\"T\")[0]}.pdf`);\n        res.send(pdfBuffer);\n    } catch (error) {\n        console.error(\"PDF generation error:\", error);\n        (0,_lib_monitoringService__WEBPACK_IMPORTED_MODULE_0__.trackException)(error, {\n            operation: \"generatePdf\",\n            filters: JSON.stringify(req.body?.filters),\n            errorDetails: error.toString()\n        });\n        const statusCode = error.message === \"Method not allowed\" ? 405 : 500;\n        res.status(statusCode).json({\n            error: error.message,\n            timestamp: new Date().toISOString()\n        });\n    }\n} // End of file - No duplicate functions below this point\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFNLENBQUMrRSxZQUFZOUUsSUFBSSxDQUFDO1lBQzFCakIsT0FBT0EsTUFBTWdHLE9BQU87WUFDcEJDLFdBQVcsSUFBSW5FLE9BQU95RCxXQUFXO1FBQ25DO0lBQ0Y7QUFDRixFQUNBLHdEQUF3RCIsInNvdXJjZXMiOlsid2VicGFjazovL2hpZ3VlcmFhenVyZWZ1bmN0aW9uLy4vcGFnZXMvYXBpL2dlbmVyYXRlUGRmLmpzPzYwYzEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2VydmVyLW9ubHkgbW9kdWxlcyB0aGF0IHdpbGwgYmUgaW1wb3J0ZWQgY29uZGl0aW9uYWxseVxubGV0IE1TR3JhcGhDbGllbnQgPSBudWxsO1xubGV0IFRva2VuQ3JlZGVudGlhbEF1dGhQcm92aWRlciA9IG51bGw7XG5sZXQgRGVmYXVsdEF6dXJlQ3JlZGVudGlhbENsYXNzID0gbnVsbDtcbmxldCBqc1BERk1vZHVsZSA9IG51bGw7XG5cbi8vIE9ubHkgaW1wb3J0IHNlcnZlci1zaWRlIG1vZHVsZXMgd2hlbiBydW5uaW5nIG9uIHRoZSBzZXJ2ZXJcbmlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICB0cnkge1xuICAgIGNvbnN0IHsgQ2xpZW50IH0gPSByZXF1aXJlKCdAbWljcm9zb2Z0L21pY3Jvc29mdC1ncmFwaC1jbGllbnQnKTtcbiAgICBjb25zdCB7IFRva2VuQ3JlZGVudGlhbEF1dGhlbnRpY2F0aW9uUHJvdmlkZXIgfSA9IHJlcXVpcmUoJ0BtaWNyb3NvZnQvbWljcm9zb2Z0LWdyYXBoLWNsaWVudC9hdXRoUHJvdmlkZXJzL2F6dXJlVG9rZW5DcmVkZW50aWFscycpO1xuICAgIGNvbnN0IHsgRGVmYXVsdEF6dXJlQ3JlZGVudGlhbCB9ID0gcmVxdWlyZSgnQGF6dXJlL2lkZW50aXR5Jyk7XG4gICAgY29uc3QganNQREYgPSByZXF1aXJlKCdqc3BkZicpO1xuICAgIHJlcXVpcmUoJ2pzcGRmLWF1dG90YWJsZScpO1xuICAgIFxuICAgIE1TR3JhcGhDbGllbnQgPSBDbGllbnQ7XG4gICAgVG9rZW5DcmVkZW50aWFsQXV0aFByb3ZpZGVyID0gVG9rZW5DcmVkZW50aWFsQXV0aGVudGljYXRpb25Qcm92aWRlcjtcbiAgICBEZWZhdWx0QXp1cmVDcmVkZW50aWFsQ2xhc3MgPSBEZWZhdWx0QXp1cmVDcmVkZW50aWFsO1xuICAgIGpzUERGTW9kdWxlID0ganNQREY7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW1wb3J0aW5nIHNlcnZlci1zaWRlIG1vZHVsZXM6JywgZXJyb3IpO1xuICB9XG59XG5cbmltcG9ydCB7IHRyYWNrRXhjZXB0aW9uLCB0cmFja01ldHJpYyB9IGZyb20gJy4uLy4uL2xpYi9tb25pdG9yaW5nU2VydmljZSc7XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb24gZm9yIGNvbnNpc3RlbnQgY3VycmVuY3kgZm9ybWF0dGluZyAtIERPIE5PVCBSRU1PVkUgT1IgRFVQTElDQVRFXG5mdW5jdGlvbiBmb3JtYXRDdXJyZW5jeShudW1iZXIpIHtcbiAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tVVMnLCB7XG4gICAgc3R5bGU6ICdjdXJyZW5jeScsXG4gICAgY3VycmVuY3k6ICdVU0QnLFxuICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMCxcbiAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDBcbiAgfSkuZm9ybWF0KG51bWJlcik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgLy8gVGhpcyBpcyBhbiBBUEkgcm91dGUsIHdoaWNoIG9ubHkgcnVucyBvbiB0aGUgc2VydmVyIHNpZGVcbiAgLy8gQnV0IHdlIHN0aWxsIG5lZWQgdG8gZW5zdXJlIHRoZSBpbXBvcnRzIHdvcmtlZCBjb3JyZWN0bHlcbiAgaWYgKCFqc1BERk1vZHVsZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnU2VydmVyLXNpZGUgbW9kdWxlcyBub3QgYXZhaWxhYmxlJyB9KTtcbiAgfVxuICBcbiAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIFxuICB0cnkge1xuICAgIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBhbGxvd2VkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBkYXNoYm9hcmREYXRhLCBmaWx0ZXJzIH0gPSByZXEuYm9keTtcbiAgICBpZiAoIWRhc2hib2FyZERhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGFzaGJvYXJkIGRhdGEgcHJvdmlkZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBkb2MgPSBuZXcganNQREZNb2R1bGUoKTtcbiAgICBcbiAgICAvLyBIZWFkZXJcbiAgICBkb2Muc2V0Rm9udFNpemUoMjApO1xuICAgIGRvYy5zZXRUZXh0Q29sb3IoMCwgNTEsIDEwMik7XG4gICAgZG9jLnRleHQoJ0hpZ3VlcmEgUHJvamVjdCAtIEV4ZWN1dGl2ZSBTdW1tYXJ5JywgMTQsIDIwKTtcbiAgICBcbiAgICBkb2Muc2V0Rm9udFNpemUoMTApO1xuICAgIGRvYy5zZXRUZXh0Q29sb3IoMTAwLCAxMDAsIDEwMCk7XG4gICAgZG9jLnRleHQoYEdlbmVyYXRlZCBvbiAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9YCwgMTQsIDI4KTtcbiAgICBcbiAgICBpZiAoZmlsdGVycyAmJiAoZmlsdGVycy53ZWVrIHx8IGZpbHRlcnMuc3lzdGVtKSkge1xuICAgICAgZG9jLnRleHQoYEZpbHRlcnM6ICR7ZmlsdGVycy53ZWVrID8gJ1dlZWs6ICcgKyBmaWx0ZXJzLndlZWsgOiAnJ30gJHtmaWx0ZXJzLnN5c3RlbSA/ICdTeXN0ZW06ICcgKyBmaWx0ZXJzLnN5c3RlbSA6ICcnfWAsIDE0LCAzNSk7XG4gICAgfVxuXG4gICAgLy8gS1BJc1xuICAgIGRvYy5zZXRGb250U2l6ZSgxNCk7XG4gICAgZG9jLnNldFRleHRDb2xvcigwLCA1MSwgMTAyKTtcbiAgICBkb2MudGV4dCgnS2V5IE1ldHJpY3MnLCAxNCwgNDUpO1xuICAgIFxuICAgIGRvYy5hdXRvVGFibGUoe1xuICAgICAgc3RhcnRZOiA1MCxcbiAgICAgIGhlYWQ6IFtbJ01ldHJpYycsICdWYWx1ZSddXSxcbiAgICAgIGJvZHk6IFtcbiAgICAgICAgWydUb3RhbCBCdWRnZXQnLCBmb3JtYXRDdXJyZW5jeShkYXNoYm9hcmREYXRhLmtwaXMudG90YWxCdWRnZXQpXSxcbiAgICAgICAgWydTcGVudCcsIGZvcm1hdEN1cnJlbmN5KGRhc2hib2FyZERhdGEua3Bpcy5zcGVudCldLFxuICAgICAgICBbJ1JlbWFpbmluZycsIGZvcm1hdEN1cnJlbmN5KGRhc2hib2FyZERhdGEua3Bpcy5yZW1haW5pbmcpXSxcbiAgICAgICAgWydPdmVycnVuIFJpc2snLCBkYXNoYm9hcmREYXRhLmtwaXMucmlza11cbiAgICAgIF0sXG4gICAgICB0aGVtZTogJ2dyaWQnLFxuICAgICAgaGVhZFN0eWxlczogeyBmaWxsQ29sb3I6IFswLCA1MSwgMTAyXSB9XG4gICAgfSk7XG5cbiAgICAvLyBIb3VycyBUcmFja2luZyBzZWN0aW9uIChuZXcpXG4gICAgaWYgKGRhc2hib2FyZERhdGEuaG91cnNUcmFja2luZykge1xuICAgICAgY29uc3QgaG91cnNZID0gZG9jLmxhc3RBdXRvVGFibGUuZmluYWxZICsgMTU7XG4gICAgICBkb2Muc2V0Rm9udFNpemUoMTQpO1xuICAgICAgZG9jLnNldFRleHRDb2xvcigwLCA1MSwgMTAyKTtcbiAgICAgIGRvYy50ZXh0KCdIb3VycyBUcmFja2luZyAmIFByb2plY3Rpb25zJywgMTQsIGhvdXJzWSk7XG4gICAgICBcbiAgICAgIGRvYy5hdXRvVGFibGUoe1xuICAgICAgICBzdGFydFk6IGhvdXJzWSArIDUsXG4gICAgICAgIGhlYWQ6IFtbJ01ldHJpYycsICdWYWx1ZSddXSxcbiAgICAgICAgYm9keTogW1xuICAgICAgICAgIFsnVG90YWwgSG91cnMgQWxsb2NhdGVkJywgZGFzaGJvYXJkRGF0YS5ob3Vyc1RyYWNraW5nLnRvdGFsSG91cnNBbGxvY2F0ZWRdLFxuICAgICAgICAgIFsnSG91cnMgVXNlZCcsIGRhc2hib2FyZERhdGEuaG91cnNUcmFja2luZy50b3RhbEhvdXJzVXNlZF0sXG4gICAgICAgICAgWydIb3VycyBSZW1haW5pbmcnLCBkYXNoYm9hcmREYXRhLmhvdXJzVHJhY2tpbmcuY29tcGxldGlvbk1ldHJpY3MuaG91cnNSZW1haW5pbmddLFxuICAgICAgICAgIFsnQ29tcGxldGlvbiBQZXJjZW50YWdlJywgYCR7ZGFzaGJvYXJkRGF0YS5ob3Vyc1RyYWNraW5nLmNvbXBsZXRpb25NZXRyaWNzLnBlcmNlbnRhZ2VDb21wbGV0ZX0lYF0sXG4gICAgICAgICAgWydQbGFubmVkIEVuZCBEYXRlJywgbmV3IERhdGUoZGFzaGJvYXJkRGF0YS5ob3Vyc1RyYWNraW5nLnBsYW5uZWRFbmREYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKV0sXG4gICAgICAgICAgWydQcm9qZWN0ZWQgRW5kIERhdGUnLCBuZXcgRGF0ZShkYXNoYm9hcmREYXRhLmhvdXJzVHJhY2tpbmcucHJvamVjdGVkRW5kRGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCldLFxuICAgICAgICAgIFsnRXN0aW1hdGVkIFdlZWtzIFJlbWFpbmluZycsIGRhc2hib2FyZERhdGEuaG91cnNUcmFja2luZy5jb21wbGV0aW9uTWV0cmljcy5lc3RpbWF0ZWRXZWVrc1JlbWFpbmluZy50b0ZpeGVkKDEpXVxuICAgICAgICBdLFxuICAgICAgICB0aGVtZTogJ2dyaWQnLFxuICAgICAgICBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzAsIDUxLCAxMDJdIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNjaGVkdWxlIFN0YXR1c1xuICAgIGNvbnN0IHNjaGVkdWxlWSA9IGRvYy5sYXN0QXV0b1RhYmxlLmZpbmFsWSArIDE1O1xuICAgIGRvYy5zZXRGb250U2l6ZSgxNCk7XG4gICAgZG9jLnNldFRleHRDb2xvcigwLCA1MSwgMTAyKTtcbiAgICBkb2MudGV4dCgnU2NoZWR1bGUgU3RhdHVzJywgMTQsIHNjaGVkdWxlWSk7XG4gICAgXG4gICAgZG9jLmF1dG9UYWJsZSh7XG4gICAgICBzdGFydFk6IHNjaGVkdWxlWSArIDUsXG4gICAgICBoZWFkOiBbWydUYXNrJywgJ1BsYW5uZWQgJScsICdBY3R1YWwgJSddXSxcbiAgICAgIGJvZHk6IGRhc2hib2FyZERhdGEuc2NoZWR1bGUubWFwKGl0ZW0gPT4gW1xuICAgICAgICBpdGVtLnRhc2ssXG4gICAgICAgIGl0ZW0uUGxhbm5lZCxcbiAgICAgICAgaXRlbS5BY3R1YWxcbiAgICAgIF0pLFxuICAgICAgdGhlbWU6ICdncmlkJyxcbiAgICAgIGhlYWRTdHlsZXM6IHsgZmlsbENvbG9yOiBbMCwgNTEsIDEwMl0gfVxuICAgIH0pO1xuXG4gICAgLy8gSXNzdWVzXG4gICAgaWYgKGRvYy5sYXN0QXV0b1RhYmxlLmZpbmFsWSA+IDIzMCkge1xuICAgICAgZG9jLmFkZFBhZ2UoKTtcbiAgICAgIGRvYy5zZXRGb250U2l6ZSgxNCk7XG4gICAgICBkb2Muc2V0VGV4dENvbG9yKDAsIDUxLCAxMDIpO1xuICAgICAgZG9jLnRleHQoJ1JlY2VudCBJc3N1ZXMnLCAxNCwgMjApO1xuICAgICAgXG4gICAgICBkb2MuYXV0b1RhYmxlKHtcbiAgICAgICAgc3RhcnRZOiAyNSxcbiAgICAgICAgaGVhZDogW1snRGF0ZScsICdTeXN0ZW0nLCAnSXNzdWUnLCAnSW1wYWN0JywgJ0FjY291bnRhYmlsaXR5J11dLFxuICAgICAgICBib2R5OiAoZmlsdGVycy5zeXN0ZW0gXG4gICAgICAgICAgPyBkYXNoYm9hcmREYXRhLmlzc3Vlcy5maWx0ZXIoaSA9PiBpLnN5c3RlbSA9PT0gZmlsdGVycy5zeXN0ZW0pXG4gICAgICAgICAgOiBkYXNoYm9hcmREYXRhLmlzc3Vlc1xuICAgICAgICApLm1hcChpdGVtID0+IFtcbiAgICAgICAgICBpdGVtLmRhdGUsXG4gICAgICAgICAgaXRlbS5zeXN0ZW0sXG4gICAgICAgICAgaXRlbS5pc3N1ZSxcbiAgICAgICAgICBpdGVtLmltcGFjdCxcbiAgICAgICAgICBpdGVtLmFjY291bnRhYmlsaXR5XG4gICAgICAgIF0pLFxuICAgICAgICB0aGVtZTogJ2dyaWQnLFxuICAgICAgICBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzAsIDUxLCAxMDJdIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpc3N1ZXNZID0gZG9jLmxhc3RBdXRvVGFibGUuZmluYWxZICsgMTU7XG4gICAgICBkb2Muc2V0Rm9udFNpemUoMTQpO1xuICAgICAgZG9jLnNldFRleHRDb2xvcigwLCA1MSwgMTAyKTtcbiAgICAgIGRvYy50ZXh0KCdSZWNlbnQgSXNzdWVzJywgMTQsIGlzc3Vlc1kpO1xuICAgICAgXG4gICAgICBkb2MuYXV0b1RhYmxlKHtcbiAgICAgICAgc3RhcnRZOiBpc3N1ZXNZICsgNSxcbiAgICAgICAgaGVhZDogW1snRGF0ZScsICdTeXN0ZW0nLCAnSXNzdWUnLCAnSW1wYWN0JywgJ0FjY291bnRhYmlsaXR5J11dLFxuICAgICAgICBib2R5OiAoZmlsdGVycy5zeXN0ZW0gXG4gICAgICAgICAgPyBkYXNoYm9hcmREYXRhLmlzc3Vlcy5maWx0ZXIoaSA9PiBpLnN5c3RlbSA9PT0gZmlsdGVycy5zeXN0ZW0pXG4gICAgICAgICAgOiBkYXNoYm9hcmREYXRhLmlzc3Vlc1xuICAgICAgICApLm1hcChpdGVtID0+IFtcbiAgICAgICAgICBpdGVtLmRhdGUsXG4gICAgICAgICAgaXRlbS5zeXN0ZW0sXG4gICAgICAgICAgaXRlbS5pc3N1ZSxcbiAgICAgICAgICBpdGVtLmltcGFjdCxcbiAgICAgICAgICBpdGVtLmFjY291bnRhYmlsaXR5XG4gICAgICAgIF0pLFxuICAgICAgICB0aGVtZTogJ2dyaWQnLFxuICAgICAgICBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzAsIDUxLCAxMDJdIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEZvb3RlclxuICAgIGNvbnN0IHBhZ2VDb3VudCA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gcGFnZUNvdW50OyBpKyspIHtcbiAgICAgIGRvYy5zZXRQYWdlKGkpO1xuICAgICAgZG9jLnNldEZvbnRTaXplKDgpO1xuICAgICAgZG9jLnNldFRleHRDb2xvcigxNTAsIDE1MCwgMTUwKTtcbiAgICAgIGRvYy50ZXh0KGBIaWd1ZXJhIFByb2plY3QgLSBQYWdlICR7aX0gb2YgJHtwYWdlQ291bnR9YCwgMTQsIGRvYy5pbnRlcm5hbC5wYWdlU2l6ZS5oZWlnaHQgLSAxMCk7XG4gICAgICBkb2MudGV4dChgQ29uZmlkZW50aWFsIC0gQXlhbGEgRGV2ZWxvcG1lbnQgSW5jLmAsIGRvYy5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIDY1LCBkb2MuaW50ZXJuYWwucGFnZVNpemUuaGVpZ2h0IC0gMTApO1xuICAgIH1cblxuICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgdHJhY2tNZXRyaWMoJ3BkZkdlbmVyYXRpb25EdXJhdGlvbicsIGR1cmF0aW9uKTtcblxuICAgIC8vIFNlbmQgdGhlIFBERlxuICAgIGNvbnN0IHBkZkJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGRvYy5vdXRwdXQoJ2FycmF5YnVmZmVyJykpO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9wZGYnKTtcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uJywgYGF0dGFjaG1lbnQ7IGZpbGVuYW1lPWhpZ3VlcmEtc3VtbWFyeS0ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfS5wZGZgKTtcbiAgICByZXMuc2VuZChwZGZCdWZmZXIpO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUERGIGdlbmVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIFxuICAgIHRyYWNrRXhjZXB0aW9uKGVycm9yLCB7XG4gICAgICBvcGVyYXRpb246ICdnZW5lcmF0ZVBkZicsXG4gICAgICBmaWx0ZXJzOiBKU09OLnN0cmluZ2lmeShyZXEuYm9keT8uZmlsdGVycyksXG4gICAgICBlcnJvckRldGFpbHM6IGVycm9yLnRvU3RyaW5nKClcbiAgICB9KTtcblxuICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBlcnJvci5tZXNzYWdlID09PSAnTWV0aG9kIG5vdCBhbGxvd2VkJyA/IDQwNSA6IDUwMDtcbiAgICByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLmpzb24oeyBcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcbiAgfVxufVxuLy8gRW5kIG9mIGZpbGUgLSBObyBkdXBsaWNhdGUgZnVuY3Rpb25zIGJlbG93IHRoaXMgcG9pbnQiXSwibmFtZXMiOlsiTVNHcmFwaENsaWVudCIsIlRva2VuQ3JlZGVudGlhbEF1dGhQcm92aWRlciIsIkRlZmF1bHRBenVyZUNyZWRlbnRpYWxDbGFzcyIsImpzUERGTW9kdWxlIiwiQ2xpZW50IiwicmVxdWlyZSIsIlRva2VuQ3JlZGVudGlhbEF1dGhlbnRpY2F0aW9uUHJvdmlkZXIiLCJEZWZhdWx0QXp1cmVDcmVkZW50aWFsIiwianNQREYiLCJlcnJvciIsImNvbnNvbGUiLCJ0cmFja0V4Y2VwdGlvbiIsInRyYWNrTWV0cmljIiwiZm9ybWF0Q3VycmVuY3kiLCJudW1iZXIiLCJJbnRsIiwiTnVtYmVyRm9ybWF0Iiwic3R5bGUiLCJjdXJyZW5jeSIsIm1pbmltdW1GcmFjdGlvbkRpZ2l0cyIsIm1heGltdW1GcmFjdGlvbkRpZ2l0cyIsImZvcm1hdCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJqc29uIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJtZXRob2QiLCJFcnJvciIsImRhc2hib2FyZERhdGEiLCJmaWx0ZXJzIiwiYm9keSIsImRvYyIsInNldEZvbnRTaXplIiwic2V0VGV4dENvbG9yIiwidGV4dCIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ3ZWVrIiwic3lzdGVtIiwiYXV0b1RhYmxlIiwic3RhcnRZIiwiaGVhZCIsImtwaXMiLCJ0b3RhbEJ1ZGdldCIsInNwZW50IiwicmVtYWluaW5nIiwicmlzayIsInRoZW1lIiwiaGVhZFN0eWxlcyIsImZpbGxDb2xvciIsImhvdXJzVHJhY2tpbmciLCJob3Vyc1kiLCJsYXN0QXV0b1RhYmxlIiwiZmluYWxZIiwidG90YWxIb3Vyc0FsbG9jYXRlZCIsInRvdGFsSG91cnNVc2VkIiwiY29tcGxldGlvbk1ldHJpY3MiLCJob3Vyc1JlbWFpbmluZyIsInBlcmNlbnRhZ2VDb21wbGV0ZSIsInBsYW5uZWRFbmREYXRlIiwicHJvamVjdGVkRW5kRGF0ZSIsImVzdGltYXRlZFdlZWtzUmVtYWluaW5nIiwidG9GaXhlZCIsInNjaGVkdWxlWSIsInNjaGVkdWxlIiwibWFwIiwiaXRlbSIsInRhc2siLCJQbGFubmVkIiwiQWN0dWFsIiwiYWRkUGFnZSIsImlzc3VlcyIsImZpbHRlciIsImkiLCJkYXRlIiwiaXNzdWUiLCJpbXBhY3QiLCJhY2NvdW50YWJpbGl0eSIsImlzc3Vlc1kiLCJwYWdlQ291bnQiLCJpbnRlcm5hbCIsImdldE51bWJlck9mUGFnZXMiLCJzZXRQYWdlIiwicGFnZVNpemUiLCJoZWlnaHQiLCJ3aWR0aCIsImR1cmF0aW9uIiwicGRmQnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsIm91dHB1dCIsInNldEhlYWRlciIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJzZW5kIiwib3BlcmF0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yRGV0YWlscyIsInRvU3RyaW5nIiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJ0aW1lc3RhbXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/generatePdf.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgeneratePdf&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FgeneratePdf.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();