"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/dashboardData";
exports.ids = ["pages/api/dashboardData"];
exports.modules = {

/***/ "@azure/identity":
/*!**********************************!*\
  !*** external "@azure/identity" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("@azure/identity");

/***/ }),

/***/ "@azure/monitor-query":
/*!***************************************!*\
  !*** external "@azure/monitor-query" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("@azure/monitor-query");

/***/ }),

/***/ "applicationinsights":
/*!**************************************!*\
  !*** external "applicationinsights" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("applicationinsights");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "redis":
/*!************************!*\
  !*** external "redis" ***!
  \************************/
/***/ ((module) => {

module.exports = require("redis");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FdashboardData&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FdashboardData.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FdashboardData&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FdashboardData.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_dashboardData_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/dashboardData.js */ \"(api)/./pages/api/dashboardData.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_dashboardData_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_dashboardData_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/dashboardData\",\n        pathname: \"/api/dashboardData\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_dashboardData_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmRhc2hib2FyZERhdGEmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmRhc2hib2FyZERhdGEuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDeUQ7QUFDekQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oaWd1ZXJhYXp1cmVmdW5jdGlvbi8/NzZlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2Rhc2hib2FyZERhdGEuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kYXNoYm9hcmREYXRhXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZGFzaGJvYXJkRGF0YVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FdashboardData&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FdashboardData.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/cacheService.ts":
/*!*****************************!*\
  !*** ./lib/cacheService.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheService: () => (/* binding */ cacheService)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/utils.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_utils__WEBPACK_IMPORTED_MODULE_0__);\n\n// Import only on the server side\nlet redisModule = null;\nlet trackExceptionFn = null;\n// Only import server-side modules when running on the server\nif (true) {\n    try {\n        redisModule = __webpack_require__(/*! redis */ \"redis\");\n        const { trackException } = __webpack_require__(/*! ./monitoringService */ \"(api)/./lib/monitoringService.ts\");\n        trackExceptionFn = trackException;\n    } catch (error) {\n        console.error(\"Error importing server-side modules:\", error);\n    }\n}\nclass RedisCache {\n    constructor(){\n        this.isConnected = false;\n        this.connectionTimeout = null;\n        this.MAX_RETRY_ATTEMPTS = 10;\n        this.INITIAL_RETRY_DELAY = 100 // ms\n        ;\n        this.MAX_RETRY_DELAY = 5000 // ms\n        ;\n        if ( true && redisModule) {\n            this.initializeRedis();\n        }\n    }\n    async initializeRedis() {\n        try {\n            const connectionString = process.env.REDIS_CONNECTION_STRING;\n            if (!connectionString) {\n                throw new Error(\"Redis connection string is not configured\");\n            }\n            this.client = redisModule.createClient({\n                url: connectionString,\n                socket: {\n                    tls: true,\n                    reconnectStrategy: (retries)=>{\n                        if (retries > this.MAX_RETRY_ATTEMPTS) {\n                            return new Error(\"Redis max retries reached\");\n                        }\n                        const delay = Math.min(this.INITIAL_RETRY_DELAY * Math.pow(1.5, retries), this.MAX_RETRY_DELAY);\n                        return delay;\n                    },\n                    connectTimeout: 15000\n                }\n            });\n            // Handle connection events\n            this.client.on(\"error\", (err)=>{\n                if (trackExceptionFn) {\n                    trackExceptionFn(err, {\n                        service: \"RedisCache\",\n                        event: \"connection-error\"\n                    });\n                }\n                this.isConnected = false;\n                this.scheduleReconnect();\n            });\n            this.client.on(\"connect\", ()=>{\n                this.isConnected = true;\n                if (this.connectionTimeout) {\n                    clearTimeout(this.connectionTimeout);\n                    this.connectionTimeout = null;\n                }\n            });\n            this.client.on(\"reconnecting\", ()=>{\n                if (trackExceptionFn) {\n                    trackExceptionFn(new Error(\"Redis reconnecting\"), {\n                        service: \"RedisCache\",\n                        event: \"reconnecting\"\n                    });\n                }\n            });\n            await this.client.connect();\n        } catch (error) {\n            if (trackExceptionFn) {\n                trackExceptionFn(error, {\n                    service: \"RedisCache\",\n                    operation: \"initializeRedis\"\n                });\n            }\n            this.isConnected = false;\n            this.scheduleReconnect();\n        }\n    }\n    scheduleReconnect() {\n        if (this.connectionTimeout) {\n            return; // Already scheduled\n        }\n        this.connectionTimeout = setTimeout(()=>{\n            this.connectionTimeout = null;\n            this.initializeRedis().catch((err)=>{\n                if (trackExceptionFn) {\n                    trackExceptionFn(err, {\n                        service: \"RedisCache\",\n                        operation: \"scheduleReconnect\"\n                    });\n                }\n            });\n        }, 5000); // Try to reconnect after 5 seconds\n    }\n    async get(key) {\n        if (false) {}\n        if (!this.isConnected) {\n            throw new _utils__WEBPACK_IMPORTED_MODULE_0__.AppError(\"Redis not connected\", 503);\n        }\n        try {\n            const value = await this.client.get(key);\n            return value ? JSON.parse(value) : null;\n        } catch (error) {\n            if (trackExceptionFn) {\n                trackExceptionFn(error, {\n                    service: \"RedisCache\",\n                    operation: \"get\",\n                    key\n                });\n            }\n            throw error;\n        }\n    }\n    async set(key, value, ttlSeconds = 300) {\n        if (false) {}\n        if (!this.isConnected) {\n            throw new _utils__WEBPACK_IMPORTED_MODULE_0__.AppError(\"Redis not connected\", 503);\n        }\n        try {\n            const serializedValue = JSON.stringify(value);\n            await this.client.set(key, serializedValue, {\n                EX: ttlSeconds\n            });\n        } catch (error) {\n            if (trackExceptionFn) {\n                trackExceptionFn(error, {\n                    service: \"RedisCache\",\n                    operation: \"set\",\n                    key\n                });\n            }\n            throw error;\n        }\n    }\n    async delete(key) {\n        if (false) {}\n        if (!this.isConnected) {\n            throw new _utils__WEBPACK_IMPORTED_MODULE_0__.AppError(\"Redis not connected\", 503);\n        }\n        try {\n            await this.client.del(key);\n        } catch (error) {\n            if (trackExceptionFn) {\n                trackExceptionFn(error, {\n                    service: \"RedisCache\",\n                    operation: \"delete\",\n                    key\n                });\n            }\n            throw error;\n        }\n    }\n}\nclass InMemoryCache {\n    async get(key) {\n        const item = this.cache.get(key);\n        if (!item) return null;\n        if (Date.now() > item.expiry) {\n            this.cache.delete(key);\n            return null;\n        }\n        return item.value;\n    }\n    async set(key, value, ttlSeconds = 300) {\n        const expiry = Date.now() + ttlSeconds * 1000;\n        this.cache.set(key, {\n            value,\n            expiry\n        });\n        // Cleanup expired items periodically\n        if (this.cache.size > 100) {\n            this.cleanup();\n        }\n    }\n    async delete(key) {\n        this.cache.delete(key);\n    }\n    cleanup() {\n        const now = Date.now();\n        for (const [key, item] of this.cache.entries()){\n            if (now > item.expiry) {\n                this.cache.delete(key);\n            }\n        }\n    }\n    constructor(){\n        this.cache = new Map();\n    }\n}\nclass CacheService {\n    constructor(){\n        this.fallbackCache = new InMemoryCache();\n        this.primaryCache = process.env.REDIS_CONNECTION_STRING ? new RedisCache() : this.fallbackCache;\n    }\n    static getInstance() {\n        if (!CacheService.instance) {\n            CacheService.instance = new CacheService();\n        }\n        return CacheService.instance;\n    }\n    async get(key) {\n        try {\n            return await this.primaryCache.get(key);\n        } catch (error) {\n            if (trackExceptionFn) {\n                trackExceptionFn(error, {\n                    service: \"CacheService\",\n                    operation: \"get\",\n                    key\n                });\n            }\n            return this.fallbackCache.get(key);\n        }\n    }\n    async set(key, value, ttlSeconds) {\n        try {\n            await this.primaryCache.set(key, value, ttlSeconds);\n        } catch (error) {\n            if (trackExceptionFn) {\n                trackExceptionFn(error, {\n                    service: \"CacheService\",\n                    operation: \"set\",\n                    key\n                });\n            }\n            await this.fallbackCache.set(key, value, ttlSeconds);\n        }\n    }\n    async delete(key) {\n        try {\n            await this.primaryCache.delete(key);\n        } catch (error) {\n            if (trackExceptionFn) {\n                trackExceptionFn(error, {\n                    service: \"CacheService\",\n                    operation: \"delete\",\n                    key\n                });\n            }\n            await this.fallbackCache.delete(key);\n        }\n    }\n}\n// Export singleton instance\nconst cacheService = CacheService.getInstance();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0k7UUFDNUMsRUFBRSxPQUFPM0MsT0FBTztZQUNaLElBQUlILGtCQUFrQjtnQkFDbEJBLGlCQUFpQkcsT0FBZ0I7b0JBQzdCNkIsU0FBUztvQkFDVEssV0FBVztvQkFDWEk7Z0JBQ0o7WUFDSjtZQUNBLE1BQU0sSUFBSSxDQUFDc0IsYUFBYSxDQUFDbEIsR0FBRyxDQUFDSixLQUFLQyxPQUFPSTtRQUM3QztJQUNKO0lBRUEsTUFBTUksT0FBT1QsR0FBVyxFQUFpQjtRQUNyQyxJQUFJO1lBQ0EsTUFBTSxJQUFJLENBQUN1QixZQUFZLENBQUNkLE1BQU0sQ0FBQ1Q7UUFDbkMsRUFBRSxPQUFPdEMsT0FBTztZQUNaLElBQUlILGtCQUFrQjtnQkFDbEJBLGlCQUFpQkcsT0FBZ0I7b0JBQzdCNkIsU0FBUztvQkFDVEssV0FBVztvQkFDWEk7Z0JBQ0o7WUFDSjtZQUNBLE1BQU0sSUFBSSxDQUFDc0IsYUFBYSxDQUFDYixNQUFNLENBQUNUO1FBQ3BDO0lBQ0o7QUFDSjtBQUVBLDRCQUE0QjtBQUNyQixNQUFNMEIsZUFBZUwsYUFBYUcsV0FBVyxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlndWVyYWF6dXJlZnVuY3Rpb24vLi9saWIvY2FjaGVTZXJ2aWNlLnRzP2JjNmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGR5bmFtaWMgZnJvbSAnbmV4dC9keW5hbWljJztcbmltcG9ydCB7IEFwcEVycm9yIH0gZnJvbSAnLi91dGlscyc7XG5cbi8vIEltcG9ydCBvbmx5IG9uIHRoZSBzZXJ2ZXIgc2lkZVxubGV0IHJlZGlzTW9kdWxlOiBhbnkgPSBudWxsO1xubGV0IHRyYWNrRXhjZXB0aW9uRm46IGFueSA9IG51bGw7XG5cbi8vIE9ubHkgaW1wb3J0IHNlcnZlci1zaWRlIG1vZHVsZXMgd2hlbiBydW5uaW5nIG9uIHRoZSBzZXJ2ZXJcbmlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICB0cnkge1xuICAgIHJlZGlzTW9kdWxlID0gcmVxdWlyZSgncmVkaXMnKTtcbiAgICBjb25zdCB7IHRyYWNrRXhjZXB0aW9uIH0gPSByZXF1aXJlKCcuL21vbml0b3JpbmdTZXJ2aWNlJyk7XG4gICAgdHJhY2tFeGNlcHRpb25GbiA9IHRyYWNrRXhjZXB0aW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGltcG9ydGluZyBzZXJ2ZXItc2lkZSBtb2R1bGVzOicsIGVycm9yKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgSUNhY2hlU2VydmljZSB7XG4gICAgZ2V0KGtleTogc3RyaW5nKTogUHJvbWlzZTxhbnk+O1xuICAgIHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgdHRsU2Vjb25kcz86IG51bWJlcik6IFByb21pc2U8dm9pZD47XG4gICAgZGVsZXRlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuY2xhc3MgUmVkaXNDYWNoZSBpbXBsZW1lbnRzIElDYWNoZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgY2xpZW50O1xuICAgIHByaXZhdGUgaXNDb25uZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIGNvbm5lY3Rpb25UaW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgTUFYX1JFVFJZX0FUVEVNUFRTID0gMTA7XG4gICAgcHJpdmF0ZSByZWFkb25seSBJTklUSUFMX1JFVFJZX0RFTEFZID0gMTAwOyAvLyBtc1xuICAgIHByaXZhdGUgcmVhZG9ubHkgTUFYX1JFVFJZX0RFTEFZID0gNTAwMDsgLy8gbXNcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgJiYgcmVkaXNNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVJlZGlzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVSZWRpcygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25TdHJpbmcgPSBwcm9jZXNzLmVudi5SRURJU19DT05ORUNUSU9OX1NUUklORztcbiAgICAgICAgICAgIGlmICghY29ubmVjdGlvblN0cmluZykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVkaXMgY29ubmVjdGlvbiBzdHJpbmcgaXMgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSByZWRpc01vZHVsZS5jcmVhdGVDbGllbnQoe1xuICAgICAgICAgICAgICAgIHVybDogY29ubmVjdGlvblN0cmluZyxcbiAgICAgICAgICAgICAgICBzb2NrZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGxzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZWNvbm5lY3RTdHJhdGVneTogKHJldHJpZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXRyaWVzID4gdGhpcy5NQVhfUkVUUllfQVRURU1QVFMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdSZWRpcyBtYXggcmV0cmllcyByZWFjaGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxheSA9IE1hdGgubWluKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuSU5JVElBTF9SRVRSWV9ERUxBWSAqIE1hdGgucG93KDEuNSwgcmV0cmllcyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuTUFYX1JFVFJZX0RFTEFZXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbGF5O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0VGltZW91dDogMTUwMDAsIC8vIDE1IHNlY29uZHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gSGFuZGxlIGNvbm5lY3Rpb24gZXZlbnRzXG4gICAgICAgICAgICB0aGlzLmNsaWVudC5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrRXhjZXB0aW9uRm4pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tFeGNlcHRpb25GbihlcnIsIHsgXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlOiAnUmVkaXNDYWNoZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2Nvbm5lY3Rpb24tZXJyb3InXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVJlY29ubmVjdCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY2xpZW50Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25UaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3Rpb25UaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uVGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY2xpZW50Lm9uKCdyZWNvbm5lY3RpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrRXhjZXB0aW9uRm4pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tFeGNlcHRpb25GbihcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBFcnJvcignUmVkaXMgcmVjb25uZWN0aW5nJyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzZXJ2aWNlOiAnUmVkaXNDYWNoZScsIGV2ZW50OiAncmVjb25uZWN0aW5nJyB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmNvbm5lY3QoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0cmFja0V4Y2VwdGlvbkZuKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tFeGNlcHRpb25GbihlcnJvciBhcyBFcnJvciwgeyBcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZTogJ1JlZGlzQ2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdpbml0aWFsaXplUmVkaXMnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlUmVjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNjaGVkdWxlUmVjb25uZWN0KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uVGltZW91dCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IHNjaGVkdWxlZFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbm5lY3Rpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25UaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVJlZGlzKCkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHJhY2tFeGNlcHRpb25Gbikge1xuICAgICAgICAgICAgICAgICAgICB0cmFja0V4Y2VwdGlvbkZuKGVyciwgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2U6ICdSZWRpc0NhY2hlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3NjaGVkdWxlUmVjb25uZWN0J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgNTAwMCk7IC8vIFRyeSB0byByZWNvbm5lY3QgYWZ0ZXIgNSBzZWNvbmRzXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0KGtleTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gT24gY2xpZW50IHNpZGUsIGp1c3QgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXBwRXJyb3IoJ1JlZGlzIG5vdCBjb25uZWN0ZWQnLCA1MDMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0KGtleSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgPyBKU09OLnBhcnNlKHZhbHVlKSA6IG51bGw7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHJhY2tFeGNlcHRpb25Gbikge1xuICAgICAgICAgICAgICAgIHRyYWNrRXhjZXB0aW9uRm4oZXJyb3IgYXMgRXJyb3IsIHtcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZTogJ1JlZGlzQ2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdnZXQnLFxuICAgICAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCB0dGxTZWNvbmRzOiBudW1iZXIgPSAzMDApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIE9uIGNsaWVudCBzaWRlLCBqdXN0IHJldHVyblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcHBFcnJvcignUmVkaXMgbm90IGNvbm5lY3RlZCcsIDUwMyk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZFZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQuc2V0KGtleSwgc2VyaWFsaXplZFZhbHVlLCB7XG4gICAgICAgICAgICAgICAgRVg6IHR0bFNlY29uZHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHRyYWNrRXhjZXB0aW9uRm4pIHtcbiAgICAgICAgICAgICAgICB0cmFja0V4Y2VwdGlvbkZuKGVycm9yIGFzIEVycm9yLCB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2U6ICdSZWRpc0NhY2hlJyxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnc2V0JyxcbiAgICAgICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZShrZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gT24gY2xpZW50IHNpZGUsIGp1c3QgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKCdSZWRpcyBub3QgY29ubmVjdGVkJywgNTAzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5kZWwoa2V5KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0cmFja0V4Y2VwdGlvbkZuKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tFeGNlcHRpb25GbihlcnJvciBhcyBFcnJvciwge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlOiAnUmVkaXNDYWNoZScsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEluTWVtb3J5Q2FjaGUgaW1wbGVtZW50cyBJQ2FjaGVTZXJ2aWNlIHtcbiAgICBwcml2YXRlIGNhY2hlOiBNYXA8c3RyaW5nLCB7IHZhbHVlOiBhbnk7IGV4cGlyeTogbnVtYmVyIH0+ID0gbmV3IE1hcCgpO1xuXG4gICAgYXN5bmMgZ2V0KGtleTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIGlmICghaXRlbSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgaWYgKERhdGUubm93KCkgPiBpdGVtLmV4cGlyeSkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7XG4gICAgfVxuXG4gICAgYXN5bmMgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCB0dGxTZWNvbmRzOiBudW1iZXIgPSAzMDApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZXhwaXJ5ID0gRGF0ZS5ub3coKSArICh0dGxTZWNvbmRzICogMTAwMCk7XG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgeyB2YWx1ZSwgZXhwaXJ5IH0pO1xuXG4gICAgICAgIC8vIENsZWFudXAgZXhwaXJlZCBpdGVtcyBwZXJpb2RpY2FsbHlcbiAgICAgICAgaWYgKHRoaXMuY2FjaGUuc2l6ZSA+IDEwMCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGUoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsZWFudXAoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgaXRlbV0gb2YgdGhpcy5jYWNoZS5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChub3cgPiBpdGVtLmV4cGlyeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIENhY2hlU2VydmljZSBpbXBsZW1lbnRzIElDYWNoZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBDYWNoZVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBwcmltYXJ5Q2FjaGU6IElDYWNoZVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBmYWxsYmFja0NhY2hlOiBJQ2FjaGVTZXJ2aWNlO1xuXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5mYWxsYmFja0NhY2hlID0gbmV3IEluTWVtb3J5Q2FjaGUoKTtcbiAgICAgICAgdGhpcy5wcmltYXJ5Q2FjaGUgPSBwcm9jZXNzLmVudi5SRURJU19DT05ORUNUSU9OX1NUUklORyA/XG4gICAgICAgICAgICBuZXcgUmVkaXNDYWNoZSgpIDpcbiAgICAgICAgICAgIHRoaXMuZmFsbGJhY2tDYWNoZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IENhY2hlU2VydmljZSB7XG4gICAgICAgIGlmICghQ2FjaGVTZXJ2aWNlLmluc3RhbmNlKSB7XG4gICAgICAgICAgICBDYWNoZVNlcnZpY2UuaW5zdGFuY2UgPSBuZXcgQ2FjaGVTZXJ2aWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENhY2hlU2VydmljZS5pbnN0YW5jZTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJpbWFyeUNhY2hlLmdldChrZXkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHRyYWNrRXhjZXB0aW9uRm4pIHtcbiAgICAgICAgICAgICAgICB0cmFja0V4Y2VwdGlvbkZuKGVycm9yIGFzIEVycm9yLCB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2U6ICdDYWNoZVNlcnZpY2UnLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdnZXQnLFxuICAgICAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrQ2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIHR0bFNlY29uZHM/OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHJpbWFyeUNhY2hlLnNldChrZXksIHZhbHVlLCB0dGxTZWNvbmRzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0cmFja0V4Y2VwdGlvbkZuKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tFeGNlcHRpb25GbihlcnJvciBhcyBFcnJvciwge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlOiAnQ2FjaGVTZXJ2aWNlJyxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnc2V0JyxcbiAgICAgICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZhbGxiYWNrQ2FjaGUuc2V0KGtleSwgdmFsdWUsIHR0bFNlY29uZHMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnByaW1hcnlDYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0cmFja0V4Y2VwdGlvbkZuKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tFeGNlcHRpb25GbihlcnJvciBhcyBFcnJvciwge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlOiAnQ2FjaGVTZXJ2aWNlJyxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnZGVsZXRlJyxcbiAgICAgICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZhbGxiYWNrQ2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBjYWNoZVNlcnZpY2UgPSBDYWNoZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTsiXSwibmFtZXMiOlsiQXBwRXJyb3IiLCJyZWRpc01vZHVsZSIsInRyYWNrRXhjZXB0aW9uRm4iLCJyZXF1aXJlIiwidHJhY2tFeGNlcHRpb24iLCJlcnJvciIsImNvbnNvbGUiLCJSZWRpc0NhY2hlIiwiY29uc3RydWN0b3IiLCJpc0Nvbm5lY3RlZCIsImNvbm5lY3Rpb25UaW1lb3V0IiwiTUFYX1JFVFJZX0FUVEVNUFRTIiwiSU5JVElBTF9SRVRSWV9ERUxBWSIsIk1BWF9SRVRSWV9ERUxBWSIsImluaXRpYWxpemVSZWRpcyIsImNvbm5lY3Rpb25TdHJpbmciLCJwcm9jZXNzIiwiZW52IiwiUkVESVNfQ09OTkVDVElPTl9TVFJJTkciLCJFcnJvciIsImNsaWVudCIsImNyZWF0ZUNsaWVudCIsInVybCIsInNvY2tldCIsInRscyIsInJlY29ubmVjdFN0cmF0ZWd5IiwicmV0cmllcyIsImRlbGF5IiwiTWF0aCIsIm1pbiIsInBvdyIsImNvbm5lY3RUaW1lb3V0Iiwib24iLCJlcnIiLCJzZXJ2aWNlIiwiZXZlbnQiLCJzY2hlZHVsZVJlY29ubmVjdCIsImNsZWFyVGltZW91dCIsImNvbm5lY3QiLCJvcGVyYXRpb24iLCJzZXRUaW1lb3V0IiwiY2F0Y2giLCJnZXQiLCJrZXkiLCJ2YWx1ZSIsIkpTT04iLCJwYXJzZSIsInNldCIsInR0bFNlY29uZHMiLCJzZXJpYWxpemVkVmFsdWUiLCJzdHJpbmdpZnkiLCJFWCIsImRlbGV0ZSIsImRlbCIsIkluTWVtb3J5Q2FjaGUiLCJpdGVtIiwiY2FjaGUiLCJEYXRlIiwibm93IiwiZXhwaXJ5Iiwic2l6ZSIsImNsZWFudXAiLCJlbnRyaWVzIiwiTWFwIiwiQ2FjaGVTZXJ2aWNlIiwiZmFsbGJhY2tDYWNoZSIsInByaW1hcnlDYWNoZSIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJjYWNoZVNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/cacheService.ts\n");

/***/ }),

/***/ "(api)/./lib/monitoringService.ts":
/*!**********************************!*\
  !*** ./lib/monitoringService.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   queryLogs: () => (/* binding */ queryLogs),\n/* harmony export */   startOperation: () => (/* binding */ startOperation),\n/* harmony export */   stopOperation: () => (/* binding */ stopOperation),\n/* harmony export */   trackDependency: () => (/* binding */ trackDependency),\n/* harmony export */   trackEvent: () => (/* binding */ trackEvent),\n/* harmony export */   trackException: () => (/* binding */ trackException),\n/* harmony export */   trackMetric: () => (/* binding */ trackMetric),\n/* harmony export */   trackRequest: () => (/* binding */ trackRequest)\n/* harmony export */ });\n// Use dynamic imports for server-only modules\n// These modules will only be imported on the server\n// Import placeholders for server-side modules\nlet appInsightsModule = null;\nlet DefaultAzureCredentialClass = null;\nlet LogAnalyticsClientClass = null;\n// Only import server-side modules when running on the server\nif (true) {\n    try {\n        appInsightsModule = __webpack_require__(/*! applicationinsights */ \"applicationinsights\");\n        const { DefaultAzureCredential } = __webpack_require__(/*! @azure/identity */ \"@azure/identity\");\n        const { LogAnalyticsClient } = __webpack_require__(/*! @azure/monitor-query */ \"@azure/monitor-query\");\n        DefaultAzureCredentialClass = DefaultAzureCredential;\n        LogAnalyticsClientClass = LogAnalyticsClient;\n    } catch (error) {\n        console.error(\"Error importing server-side modules:\", error);\n    }\n}\nclass MonitoringService {\n    constructor(){\n        this.initialized = false;\n        if (true) {\n            this.initializeAppInsights();\n            this.initializeLogAnalytics();\n        }\n    }\n    static getInstance() {\n        if (!MonitoringService.instance) {\n            MonitoringService.instance = new MonitoringService();\n        }\n        return MonitoringService.instance;\n    }\n    initializeAppInsights() {\n        if (!this.initialized && process.env.APPLICATIONINSIGHTS_CONNECTION_STRING && appInsightsModule) {\n            appInsightsModule.setup(process.env.APPLICATIONINSIGHTS_CONNECTION_STRING).setAutoDependencyCorrelation(true).setAutoCollectRequests(true).setAutoCollectPerformance(true).setAutoCollectExceptions(true).setAutoCollectDependencies(true).setAutoCollectConsole(true).setUseDiskRetryCaching(true).setSendLiveMetrics(true).setDistributedTracingMode(appInsightsModule.DistributedTracingModes.AI_AND_W3C);\n            appInsightsModule.defaultClient.context.tags[appInsightsModule.defaultClient.context.keys.cloudRole] = \"HigueraFunction\";\n            appInsightsModule.start();\n            this.client = appInsightsModule.defaultClient;\n            this.initialized = true;\n        }\n    }\n    initializeLogAnalytics() {\n        if (DefaultAzureCredentialClass && LogAnalyticsClientClass) {\n            try {\n                const credential = new DefaultAzureCredentialClass();\n                this.logAnalyticsClient = new LogAnalyticsClientClass(credential);\n            } catch (error) {\n                console.error(\"Error initializing Log Analytics client:\", error);\n            }\n        }\n    }\n    trackException(error, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                errorName: error.name,\n                stackTrace: error.stack,\n                timestamp: new Date().toISOString()\n            };\n            this.client.trackException({\n                exception: error,\n                properties: enhancedProperties\n            });\n        } catch (error) {\n            console.error(\"Error tracking exception:\", error);\n        }\n    }\n    trackEvent(name, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                timestamp: new Date().toISOString(),\n                environment: process.env.AZURE_ENVIRONMENT || \"development\"\n            };\n            this.client.trackEvent({\n                name,\n                properties: enhancedProperties\n            });\n        } catch (error) {\n            console.error(\"Error tracking event:\", error);\n        }\n    }\n    trackMetric(name, value, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                timestamp: new Date().toISOString(),\n                environment: process.env.AZURE_ENVIRONMENT || \"development\"\n            };\n            this.client.trackMetric({\n                name,\n                value,\n                properties: enhancedProperties\n            });\n        } catch (error) {\n            console.error(\"Error tracking metric:\", error);\n        }\n    }\n    trackRequest(name, url, duration, success, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                timestamp: new Date().toISOString(),\n                environment: process.env.AZURE_ENVIRONMENT || \"development\"\n            };\n            this.client.trackRequest({\n                name,\n                url,\n                duration,\n                success,\n                properties: enhancedProperties\n            });\n        } catch (error) {\n            console.error(\"Error tracking request:\", error);\n        }\n    }\n    trackDependency(name, data, duration, success, properties) {\n        if ( false || !this.initialized) {\n            return; // Skip on client-side\n        }\n        try {\n            const enhancedProperties = {\n                ...properties,\n                timestamp: new Date().toISOString(),\n                environment: process.env.AZURE_ENVIRONMENT || \"development\"\n            };\n            this.client.trackDependency({\n                name,\n                data,\n                duration,\n                success,\n                properties: enhancedProperties,\n                dependencyTypeName: \"HTTP\"\n            });\n        } catch (error) {\n            console.error(\"Error tracking dependency:\", error);\n        }\n    }\n    async queryLogs(query, timeRange) {\n        if ( false || !this.logAnalyticsClient) {\n            return null; // Skip on client-side\n        }\n        try {\n            const workspaceId = process.env.LOG_ANALYTICS_WORKSPACE_ID;\n            if (!workspaceId) {\n                throw new Error(\"LOG_ANALYTICS_WORKSPACE_ID not configured\");\n            }\n            const result = await this.logAnalyticsClient.queryWorkspace(workspaceId, query, {\n                timeRange\n            });\n            return result;\n        } catch (error) {\n            if (this.initialized) {\n                this.trackException(error, {\n                    operation: \"queryLogs\"\n                });\n            }\n            throw error;\n        }\n    }\n    startOperation(name) {\n        if ( false || !this.initialized) {\n            return null; // Skip on client-side\n        }\n        try {\n            return this.client.startOperation({\n                name\n            });\n        } catch (error) {\n            console.error(\"Error starting operation:\", error);\n            return null;\n        }\n    }\n    stopOperation(operation) {\n        if ( false || !this.initialized || !operation) {\n            return; // Skip on client-side\n        }\n        try {\n            this.client.stopOperation(operation);\n        } catch (error) {\n            console.error(\"Error stopping operation:\", error);\n        }\n    }\n}\n// Export singleton instance methods\nconst monitoringService = MonitoringService.getInstance();\nconst trackException = (error, properties)=>monitoringService.trackException(error, properties);\nconst trackEvent = (name, properties)=>monitoringService.trackEvent(name, properties);\nconst trackMetric = (name, value, properties)=>monitoringService.trackMetric(name, value, properties);\nconst trackRequest = (name, url, duration, success, properties)=>monitoringService.trackRequest(name, url, duration, success, properties);\nconst trackDependency = (name, data, duration, success, properties)=>monitoringService.trackDependency(name, data, duration, success, properties);\nconst queryLogs = (query, timeRange)=>monitoringService.queryLogs(query, timeRange);\nconst startOperation = (name)=>monitoringService.startOperation(name);\nconst stopOperation = (operation)=>monitoringService.stopOperation(operation);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ1AsTUFBTUgsWUFBWTtBQUU1QyxNQUFNYSxjQUFjLENBQUNWLE1BQWNXLE9BQWVkLGFBQ3JEaUMsa0JBQWtCcEIsV0FBVyxDQUFDVixNQUFNVyxPQUFPZCxZQUFZO0FBRXBELE1BQU1lLGVBQWUsQ0FBQ1osTUFBY2EsS0FBYUMsVUFBa0JDLFNBQWtCbEIsYUFDeEZpQyxrQkFBa0JsQixZQUFZLENBQUNaLE1BQU1hLEtBQUtDLFVBQVVDLFNBQVNsQixZQUFZO0FBRXRFLE1BQU1tQixrQkFBa0IsQ0FBQ2hCLE1BQWNpQixNQUFjSCxVQUFrQkMsU0FBa0JsQixhQUM1RmlDLGtCQUFrQmQsZUFBZSxDQUFDaEIsTUFBTWlCLE1BQU1ILFVBQVVDLFNBQVNsQixZQUFZO0FBRTFFLE1BQU1zQixZQUFZLENBQUNDLE9BQWVDLFlBQ3JDUyxrQkFBa0JYLFNBQVMsQ0FBQ0MsT0FBT0MsV0FBVztBQUUzQyxNQUFNTyxpQkFBaUIsQ0FBQzVCLE9BQzNCOEIsa0JBQWtCRixjQUFjLENBQUM1QixNQUFNO0FBRXBDLE1BQU02QixnQkFBZ0IsQ0FBQ0YsWUFDMUJHLGtCQUFrQkQsYUFBYSxDQUFDRixXQUFXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlndWVyYWF6dXJlZnVuY3Rpb24vLi9saWIvbW9uaXRvcmluZ1NlcnZpY2UudHM/ODhkZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBVc2UgZHluYW1pYyBpbXBvcnRzIGZvciBzZXJ2ZXItb25seSBtb2R1bGVzXG4vLyBUaGVzZSBtb2R1bGVzIHdpbGwgb25seSBiZSBpbXBvcnRlZCBvbiB0aGUgc2VydmVyXG5cbi8vIEltcG9ydCBwbGFjZWhvbGRlcnMgZm9yIHNlcnZlci1zaWRlIG1vZHVsZXNcbmxldCBhcHBJbnNpZ2h0c01vZHVsZTogYW55ID0gbnVsbDtcbmxldCBEZWZhdWx0QXp1cmVDcmVkZW50aWFsQ2xhc3M6IGFueSA9IG51bGw7XG5sZXQgTG9nQW5hbHl0aWNzQ2xpZW50Q2xhc3M6IGFueSA9IG51bGw7XG5cbi8vIE9ubHkgaW1wb3J0IHNlcnZlci1zaWRlIG1vZHVsZXMgd2hlbiBydW5uaW5nIG9uIHRoZSBzZXJ2ZXJcbmlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICB0cnkge1xuICAgIGFwcEluc2lnaHRzTW9kdWxlID0gcmVxdWlyZSgnYXBwbGljYXRpb25pbnNpZ2h0cycpO1xuICAgIGNvbnN0IHsgRGVmYXVsdEF6dXJlQ3JlZGVudGlhbCB9ID0gcmVxdWlyZSgnQGF6dXJlL2lkZW50aXR5Jyk7XG4gICAgY29uc3QgeyBMb2dBbmFseXRpY3NDbGllbnQgfSA9IHJlcXVpcmUoJ0BhenVyZS9tb25pdG9yLXF1ZXJ5Jyk7XG4gICAgXG4gICAgRGVmYXVsdEF6dXJlQ3JlZGVudGlhbENsYXNzID0gRGVmYXVsdEF6dXJlQ3JlZGVudGlhbDtcbiAgICBMb2dBbmFseXRpY3NDbGllbnRDbGFzcyA9IExvZ0FuYWx5dGljc0NsaWVudDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbXBvcnRpbmcgc2VydmVyLXNpZGUgbW9kdWxlczonLCBlcnJvcik7XG4gIH1cbn1cblxuY2xhc3MgTW9uaXRvcmluZ1NlcnZpY2Uge1xuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBNb25pdG9yaW5nU2VydmljZTtcbiAgICBwcml2YXRlIGNsaWVudDogYW55O1xuICAgIHByaXZhdGUgbG9nQW5hbHl0aWNzQ2xpZW50OiBhbnk7XG4gICAgcHJpdmF0ZSBpbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVBcHBJbnNpZ2h0cygpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplTG9nQW5hbHl0aWNzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IE1vbml0b3JpbmdTZXJ2aWNlIHtcbiAgICAgICAgaWYgKCFNb25pdG9yaW5nU2VydmljZS5pbnN0YW5jZSkge1xuICAgICAgICAgICAgTW9uaXRvcmluZ1NlcnZpY2UuaW5zdGFuY2UgPSBuZXcgTW9uaXRvcmluZ1NlcnZpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTW9uaXRvcmluZ1NlcnZpY2UuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplQXBwSW5zaWdodHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCAmJiBwcm9jZXNzLmVudi5BUFBMSUNBVElPTklOU0lHSFRTX0NPTk5FQ1RJT05fU1RSSU5HICYmIGFwcEluc2lnaHRzTW9kdWxlKSB7XG4gICAgICAgICAgICBhcHBJbnNpZ2h0c01vZHVsZS5zZXR1cChwcm9jZXNzLmVudi5BUFBMSUNBVElPTklOU0lHSFRTX0NPTk5FQ1RJT05fU1RSSU5HKVxuICAgICAgICAgICAgICAgIC5zZXRBdXRvRGVwZW5kZW5jeUNvcnJlbGF0aW9uKHRydWUpXG4gICAgICAgICAgICAgICAgLnNldEF1dG9Db2xsZWN0UmVxdWVzdHModHJ1ZSlcbiAgICAgICAgICAgICAgICAuc2V0QXV0b0NvbGxlY3RQZXJmb3JtYW5jZSh0cnVlKVxuICAgICAgICAgICAgICAgIC5zZXRBdXRvQ29sbGVjdEV4Y2VwdGlvbnModHJ1ZSlcbiAgICAgICAgICAgICAgICAuc2V0QXV0b0NvbGxlY3REZXBlbmRlbmNpZXModHJ1ZSlcbiAgICAgICAgICAgICAgICAuc2V0QXV0b0NvbGxlY3RDb25zb2xlKHRydWUpXG4gICAgICAgICAgICAgICAgLnNldFVzZURpc2tSZXRyeUNhY2hpbmcodHJ1ZSlcbiAgICAgICAgICAgICAgICAuc2V0U2VuZExpdmVNZXRyaWNzKHRydWUpXG4gICAgICAgICAgICAgICAgLnNldERpc3RyaWJ1dGVkVHJhY2luZ01vZGUoYXBwSW5zaWdodHNNb2R1bGUuRGlzdHJpYnV0ZWRUcmFjaW5nTW9kZXMuQUlfQU5EX1czQyk7XG5cbiAgICAgICAgICAgIGFwcEluc2lnaHRzTW9kdWxlLmRlZmF1bHRDbGllbnQuY29udGV4dC50YWdzW2FwcEluc2lnaHRzTW9kdWxlLmRlZmF1bHRDbGllbnQuY29udGV4dC5rZXlzLmNsb3VkUm9sZV0gPSBcIkhpZ3VlcmFGdW5jdGlvblwiO1xuICAgICAgICAgICAgYXBwSW5zaWdodHNNb2R1bGUuc3RhcnQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBhcHBJbnNpZ2h0c01vZHVsZS5kZWZhdWx0Q2xpZW50O1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRpYWxpemVMb2dBbmFseXRpY3MoKSB7XG4gICAgICAgIGlmIChEZWZhdWx0QXp1cmVDcmVkZW50aWFsQ2xhc3MgJiYgTG9nQW5hbHl0aWNzQ2xpZW50Q2xhc3MpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IG5ldyBEZWZhdWx0QXp1cmVDcmVkZW50aWFsQ2xhc3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0FuYWx5dGljc0NsaWVudCA9IG5ldyBMb2dBbmFseXRpY3NDbGllbnRDbGFzcyhjcmVkZW50aWFsKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5pdGlhbGl6aW5nIExvZyBBbmFseXRpY3MgY2xpZW50OicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB0cmFja0V4Y2VwdGlvbihlcnJvcjogRXJyb3IsIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCAhdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIG9uIGNsaWVudC1zaWRlXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZW5oYW5jZWRQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgZXJyb3JOYW1lOiBlcnJvci5uYW1lLFxuICAgICAgICAgICAgICAgIHN0YWNrVHJhY2U6IGVycm9yLnN0YWNrLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmNsaWVudC50cmFja0V4Y2VwdGlvbih7XG4gICAgICAgICAgICAgICAgZXhjZXB0aW9uOiBlcnJvcixcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBlbmhhbmNlZFByb3BlcnRpZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJhY2tpbmcgZXhjZXB0aW9uOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB0cmFja0V2ZW50KG5hbWU6IHN0cmluZywgcHJvcGVydGllcz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnIHx8ICF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIFNraXAgb24gY2xpZW50LXNpZGVcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbmhhbmNlZFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuQVpVUkVfRU5WSVJPTk1FTlQgfHwgJ2RldmVsb3BtZW50J1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jbGllbnQudHJhY2tFdmVudCh7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBlbmhhbmNlZFByb3BlcnRpZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJhY2tpbmcgZXZlbnQ6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHRyYWNrTWV0cmljKG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciwgcHJvcGVydGllcz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnIHx8ICF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIFNraXAgb24gY2xpZW50LXNpZGVcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbmhhbmNlZFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuQVpVUkVfRU5WSVJPTk1FTlQgfHwgJ2RldmVsb3BtZW50J1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jbGllbnQudHJhY2tNZXRyaWMoe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczogZW5oYW5jZWRQcm9wZXJ0aWVzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHRyYWNraW5nIG1ldHJpYzonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdHJhY2tSZXF1ZXN0KG5hbWU6IHN0cmluZywgdXJsOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIsIHN1Y2Nlc3M6IGJvb2xlYW4sIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCAhdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIG9uIGNsaWVudC1zaWRlXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZW5oYW5jZWRQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52LkFaVVJFX0VOVklST05NRU5UIHx8ICdkZXZlbG9wbWVudCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY2xpZW50LnRyYWNrUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgc3VjY2VzcyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBlbmhhbmNlZFByb3BlcnRpZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJhY2tpbmcgcmVxdWVzdDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdHJhY2tEZXBlbmRlbmN5KG5hbWU6IHN0cmluZywgZGF0YTogc3RyaW5nLCBkdXJhdGlvbjogbnVtYmVyLCBzdWNjZXNzOiBib29sZWFuLCBwcm9wZXJ0aWVzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgfHwgIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gU2tpcCBvbiBjbGllbnQtc2lkZVxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGVuaGFuY2VkUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICAuLi5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5BWlVSRV9FTlZJUk9OTUVOVCB8fCAnZGV2ZWxvcG1lbnQnXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmNsaWVudC50cmFja0RlcGVuZGVuY3koe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICBzdWNjZXNzLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IGVuaGFuY2VkUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmN5VHlwZU5hbWU6IFwiSFRUUFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHRyYWNraW5nIGRlcGVuZGVuY3k6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHF1ZXJ5TG9ncyhxdWVyeTogc3RyaW5nLCB0aW1lUmFuZ2U6IHsgc3RhcnQ6IERhdGU7IGVuZDogRGF0ZSB9KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCAhdGhpcy5sb2dBbmFseXRpY3NDbGllbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBTa2lwIG9uIGNsaWVudC1zaWRlXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgd29ya3NwYWNlSWQgPSBwcm9jZXNzLmVudi5MT0dfQU5BTFlUSUNTX1dPUktTUEFDRV9JRDtcbiAgICAgICAgICAgIGlmICghd29ya3NwYWNlSWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xPR19BTkFMWVRJQ1NfV09SS1NQQUNFX0lEIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubG9nQW5hbHl0aWNzQ2xpZW50LnF1ZXJ5V29ya3NwYWNlKFxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUlkLFxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgICAgIHsgdGltZVJhbmdlIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tFeGNlcHRpb24oZXJyb3IgYXMgRXJyb3IsIHsgb3BlcmF0aW9uOiAncXVlcnlMb2dzJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0T3BlcmF0aW9uKG5hbWU6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCAhdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFNraXAgb24gY2xpZW50LXNpZGVcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQuc3RhcnRPcGVyYXRpb24oeyBuYW1lIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhcnRpbmcgb3BlcmF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0b3BPcGVyYXRpb24ob3BlcmF0aW9uOiBhbnkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnIHx8ICF0aGlzLmluaXRpYWxpemVkIHx8ICFvcGVyYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gU2tpcCBvbiBjbGllbnQtc2lkZVxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LnN0b3BPcGVyYXRpb24ob3BlcmF0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0b3BwaW5nIG9wZXJhdGlvbjonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2UgbWV0aG9kc1xuY29uc3QgbW9uaXRvcmluZ1NlcnZpY2UgPSBNb25pdG9yaW5nU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuXG5leHBvcnQgY29uc3QgdHJhY2tFeGNlcHRpb24gPSAoZXJyb3I6IEVycm9yLCBwcm9wZXJ0aWVzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkgPT4gXG4gICAgbW9uaXRvcmluZ1NlcnZpY2UudHJhY2tFeGNlcHRpb24oZXJyb3IsIHByb3BlcnRpZXMpO1xuXG5leHBvcnQgY29uc3QgdHJhY2tFdmVudCA9IChuYW1lOiBzdHJpbmcsIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSA9PiBcbiAgICBtb25pdG9yaW5nU2VydmljZS50cmFja0V2ZW50KG5hbWUsIHByb3BlcnRpZXMpO1xuXG5leHBvcnQgY29uc3QgdHJhY2tNZXRyaWMgPSAobmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyLCBwcm9wZXJ0aWVzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkgPT4gXG4gICAgbW9uaXRvcmluZ1NlcnZpY2UudHJhY2tNZXRyaWMobmFtZSwgdmFsdWUsIHByb3BlcnRpZXMpO1xuXG5leHBvcnQgY29uc3QgdHJhY2tSZXF1ZXN0ID0gKG5hbWU6IHN0cmluZywgdXJsOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIsIHN1Y2Nlc3M6IGJvb2xlYW4sIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSA9PiBcbiAgICBtb25pdG9yaW5nU2VydmljZS50cmFja1JlcXVlc3QobmFtZSwgdXJsLCBkdXJhdGlvbiwgc3VjY2VzcywgcHJvcGVydGllcyk7XG5cbmV4cG9ydCBjb25zdCB0cmFja0RlcGVuZGVuY3kgPSAobmFtZTogc3RyaW5nLCBkYXRhOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIsIHN1Y2Nlc3M6IGJvb2xlYW4sIHByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSA9PiBcbiAgICBtb25pdG9yaW5nU2VydmljZS50cmFja0RlcGVuZGVuY3kobmFtZSwgZGF0YSwgZHVyYXRpb24sIHN1Y2Nlc3MsIHByb3BlcnRpZXMpO1xuXG5leHBvcnQgY29uc3QgcXVlcnlMb2dzID0gKHF1ZXJ5OiBzdHJpbmcsIHRpbWVSYW5nZTogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH0pID0+IFxuICAgIG1vbml0b3JpbmdTZXJ2aWNlLnF1ZXJ5TG9ncyhxdWVyeSwgdGltZVJhbmdlKTtcblxuZXhwb3J0IGNvbnN0IHN0YXJ0T3BlcmF0aW9uID0gKG5hbWU6IHN0cmluZykgPT4gXG4gICAgbW9uaXRvcmluZ1NlcnZpY2Uuc3RhcnRPcGVyYXRpb24obmFtZSk7XG5cbmV4cG9ydCBjb25zdCBzdG9wT3BlcmF0aW9uID0gKG9wZXJhdGlvbjogYW55KSA9PiBcbiAgICBtb25pdG9yaW5nU2VydmljZS5zdG9wT3BlcmF0aW9uKG9wZXJhdGlvbik7Il0sIm5hbWVzIjpbImFwcEluc2lnaHRzTW9kdWxlIiwiRGVmYXVsdEF6dXJlQ3JlZGVudGlhbENsYXNzIiwiTG9nQW5hbHl0aWNzQ2xpZW50Q2xhc3MiLCJyZXF1aXJlIiwiRGVmYXVsdEF6dXJlQ3JlZGVudGlhbCIsIkxvZ0FuYWx5dGljc0NsaWVudCIsImVycm9yIiwiY29uc29sZSIsIk1vbml0b3JpbmdTZXJ2aWNlIiwiaW5pdGlhbGl6ZWQiLCJpbml0aWFsaXplQXBwSW5zaWdodHMiLCJpbml0aWFsaXplTG9nQW5hbHl0aWNzIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsInByb2Nlc3MiLCJlbnYiLCJBUFBMSUNBVElPTklOU0lHSFRTX0NPTk5FQ1RJT05fU1RSSU5HIiwic2V0dXAiLCJzZXRBdXRvRGVwZW5kZW5jeUNvcnJlbGF0aW9uIiwic2V0QXV0b0NvbGxlY3RSZXF1ZXN0cyIsInNldEF1dG9Db2xsZWN0UGVyZm9ybWFuY2UiLCJzZXRBdXRvQ29sbGVjdEV4Y2VwdGlvbnMiLCJzZXRBdXRvQ29sbGVjdERlcGVuZGVuY2llcyIsInNldEF1dG9Db2xsZWN0Q29uc29sZSIsInNldFVzZURpc2tSZXRyeUNhY2hpbmciLCJzZXRTZW5kTGl2ZU1ldHJpY3MiLCJzZXREaXN0cmlidXRlZFRyYWNpbmdNb2RlIiwiRGlzdHJpYnV0ZWRUcmFjaW5nTW9kZXMiLCJBSV9BTkRfVzNDIiwiZGVmYXVsdENsaWVudCIsImNvbnRleHQiLCJ0YWdzIiwia2V5cyIsImNsb3VkUm9sZSIsInN0YXJ0IiwiY2xpZW50IiwiY3JlZGVudGlhbCIsImxvZ0FuYWx5dGljc0NsaWVudCIsInRyYWNrRXhjZXB0aW9uIiwicHJvcGVydGllcyIsImVuaGFuY2VkUHJvcGVydGllcyIsImVycm9yTmFtZSIsIm5hbWUiLCJzdGFja1RyYWNlIiwic3RhY2siLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJleGNlcHRpb24iLCJ0cmFja0V2ZW50IiwiZW52aXJvbm1lbnQiLCJBWlVSRV9FTlZJUk9OTUVOVCIsInRyYWNrTWV0cmljIiwidmFsdWUiLCJ0cmFja1JlcXVlc3QiLCJ1cmwiLCJkdXJhdGlvbiIsInN1Y2Nlc3MiLCJ0cmFja0RlcGVuZGVuY3kiLCJkYXRhIiwiZGVwZW5kZW5jeVR5cGVOYW1lIiwicXVlcnlMb2dzIiwicXVlcnkiLCJ0aW1lUmFuZ2UiLCJ3b3Jrc3BhY2VJZCIsIkxPR19BTkFMWVRJQ1NfV09SS1NQQUNFX0lEIiwiRXJyb3IiLCJyZXN1bHQiLCJxdWVyeVdvcmtzcGFjZSIsIm9wZXJhdGlvbiIsInN0YXJ0T3BlcmF0aW9uIiwic3RvcE9wZXJhdGlvbiIsIm1vbml0b3JpbmdTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/monitoringService.ts\n");

/***/ }),

/***/ "(api)/./lib/utils.js":
/*!**********************!*\
  !*** ./lib/utils.js ***!
  \**********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Use conditional imports for server-side only modules\n\nlet DefaultAzureCredentialClass = null;\nlet trackExceptionFn = null;\n// Only import server-side modules when running on the server\nif (true) {\n    try {\n        const { DefaultAzureCredential } = __webpack_require__(/*! @azure/identity */ \"@azure/identity\");\n        const { trackException } = __webpack_require__(/*! ./monitoringService */ \"(api)/./lib/monitoringService.ts\");\n        DefaultAzureCredentialClass = DefaultAzureCredential;\n        trackExceptionFn = trackException;\n    } catch (error) {\n        console.error(\"Error importing server-side modules:\", error);\n    }\n}\n// Reusable error types\nclass AppError extends Error {\n    constructor(message, statusCode = 500){\n        super(message);\n        this.name = \"AppError\";\n        this.statusCode = statusCode;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\n// Retry logic with exponential backoff\nasync function withRetry(operation, maxRetries = 3, baseDelay = 1000) {\n    let lastError;\n    for(let attempt = 0; attempt < maxRetries; attempt++){\n        try {\n            return await operation();\n        } catch (error) {\n            lastError = error;\n            if (!isRetryableError(error) || attempt === maxRetries - 1) {\n                throw error;\n            }\n            const delay = Math.min(baseDelay * Math.pow(2, attempt) + Math.random() * 1000, 10000);\n            if ( true && trackExceptionFn) {\n                trackExceptionFn(error, {\n                    operation: \"retry\",\n                    attempt: attempt.toString(),\n                    nextDelay: delay.toString()\n                });\n            }\n            await sleep(delay);\n        }\n    }\n    throw lastError;\n}\nfunction isRetryableError(error) {\n    const retryableCodes = [\n        408,\n        429,\n        500,\n        502,\n        503,\n        504\n    ];\n    const retryableMessages = [\n        \"ETIMEDOUT\",\n        \"ECONNRESET\",\n        \"ECONNREFUSED\",\n        \"EPIPE\",\n        \"EHOSTUNREACH\",\n        \"ENETUNREACH\",\n        \"ESOCKETTIMEDOUT\"\n    ];\n    return retryableCodes.includes(error.statusCode) || retryableMessages.includes(error.code) || error.message.toLowerCase().includes(\"timeout\") || error.message.toLowerCase().includes(\"network\") || error.message.toLowerCase().includes(\"temporarily unavailable\");\n}\nfunction sleep(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\n// Enhanced error response formatter\nfunction formatErrorResponse(error) {\n    const response = {\n        error: {\n            message: error.message,\n            type: error.name,\n            statusCode: error.statusCode || 500\n        }\n    };\n    if (true) {\n        response.error.stack = error.stack;\n        response.error.details = error.details;\n    }\n    return response;\n}\n// Application Insights integration\nconst appInsightsEnabled =  true && !!process.env.APPLICATIONINSIGHTS_CONNECTION_STRING;\nfunction logError(error, context = {}) {\n    if ( true && trackExceptionFn) {\n        trackExceptionFn(error, {\n            ...context,\n            timestamp: new Date().toISOString(),\n            errorName: error.name,\n            errorMessage: error.message,\n            stackTrace: error.stack\n        });\n    }\n}\nfunction sanitizeInput(input) {\n    if (typeof input === \"string\") {\n        return input.replace(/[<>]/g, \"\").replace(/javascript:/gi, \"\").replace(/on\\w+=/gi, \"\").trim();\n    } else if (Array.isArray(input)) {\n        return input.map(sanitizeInput);\n    } else if (typeof input === \"object\" && input !== null) {\n        const sanitized = {};\n        for (const [key, value] of Object.entries(input)){\n            sanitized[key] = sanitizeInput(value);\n        }\n        return sanitized;\n    }\n    return input;\n}\nfunction validateEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return typeof email === \"string\" && emailRegex.test(email);\n}\nfunction formatDashboardData(data) {\n    try {\n        if (!data || typeof data !== \"object\") {\n            throw new AppError(\"Invalid dashboard data\", 400);\n        }\n        const kpiSection = formatKPISection(data.kpis);\n        const issuesSection = formatIssuesSection(data.issues);\n        const scheduleSection = formatScheduleSection(data.schedule);\n        return `${kpiSection}${issuesSection}${scheduleSection}`;\n    } catch (error) {\n        if ( true && trackExceptionFn) {\n            trackExceptionFn(error, {\n                operation: \"formatDashboardData\"\n            });\n        }\n        throw new AppError(\"Error formatting dashboard data\", 500);\n    }\n}\nfunction formatKPISection(kpis) {\n    if (!kpis || typeof kpis !== \"object\") {\n        throw new AppError(\"Invalid KPI data\", 400);\n    }\n    return `\nHIGUERA PROJECT - EXECUTIVE SUMMARY\n\nKEY METRICS:\n• Total Budget: ${formatCurrency(kpis.totalBudget)}\n• Spent: ${formatCurrency(kpis.spent)}\n• Remaining: ${formatCurrency(kpis.remaining)}\n• Overrun Risk: ${kpis.risk}\n`;\n}\nfunction formatIssuesSection(issues) {\n    if (!Array.isArray(issues)) {\n        throw new AppError(\"Invalid issues data\", 400);\n    }\n    const recentIssues = issues.slice(0, 5).map((issue)=>`\n• ${issue.date} - ${issue.system}\n  Issue: ${sanitizeInput(issue.issue)}\n  Impact: ${sanitizeInput(issue.impact)}\n  Accountability: ${sanitizeInput(issue.accountability)}`).join(\"\\n\");\n    return `\nRECENT ISSUES:${recentIssues}`;\n}\nfunction formatScheduleSection(schedule) {\n    if (!Array.isArray(schedule)) {\n        throw new AppError(\"Invalid schedule data\", 400);\n    }\n    const scheduleItems = schedule.map((item)=>`• ${sanitizeInput(item.task)}: Plan ${item.Planned}% vs Actual ${item.Actual}%`).join(\"\\n\");\n    return `\nSCHEDULE STATUS:\n${scheduleItems}\n\nFor detailed charts and visualizations, please visit the project dashboard.\n`;\n}\nfunction formatCurrency(number) {\n    if (typeof number !== \"number\" || isNaN(number)) {\n        throw new AppError(\"Invalid currency value\", 400);\n    }\n    return new Intl.NumberFormat(\"en-US\", {\n        style: \"currency\",\n        currency: \"USD\",\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0\n    }).format(number);\n}\nmodule.exports = {\n    AppError,\n    withRetry,\n    sleep,\n    sanitizeInput,\n    validateEmail,\n    formatDashboardData,\n    formatCurrency,\n    formatErrorResponse,\n    logError\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTUksY0FBYyxFQUFFLENBQUMsRUFDcERDLElBQUksQ0FBQztJQUVSLE9BQU8sQ0FBQztjQUNJLEVBQUVQLGFBQWEsQ0FBQztBQUM5QjtBQUVBLFNBQVNQLHNCQUFzQkMsUUFBUTtJQUNyQyxJQUFJLENBQUN0QixNQUFNQyxPQUFPLENBQUNxQixXQUFXO1FBQzVCLE1BQU0sSUFBSTFFLFNBQVMseUJBQXlCO0lBQzlDO0lBRUEsTUFBTXdGLGdCQUFnQmQsU0FDbkJwQixHQUFHLENBQUNtQyxDQUFBQSxPQUFRLENBQUMsRUFBRSxFQUFFekMsY0FBY3lDLEtBQUtDLElBQUksRUFBRSxPQUFPLEVBQUVELEtBQUtFLE9BQU8sQ0FBQyxZQUFZLEVBQUVGLEtBQUtHLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFDNUZMLElBQUksQ0FBQztJQUVSLE9BQU8sQ0FBQzs7QUFFVixFQUFFQyxjQUFjOzs7QUFHaEIsQ0FBQztBQUNEO0FBRUEsU0FBU2IsZUFBZWtCLE1BQU07SUFDNUIsSUFBSSxPQUFPQSxXQUFXLFlBQVlDLE1BQU1ELFNBQVM7UUFDL0MsTUFBTSxJQUFJN0YsU0FBUywwQkFBMEI7SUFDL0M7SUFFQSxPQUFPLElBQUkrRixLQUFLQyxZQUFZLENBQUMsU0FBUztRQUNwQ0MsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLHVCQUF1QjtRQUN2QkMsdUJBQXVCO0lBQ3pCLEdBQUdDLE1BQU0sQ0FBQ1I7QUFDWjtBQUVBUyxPQUFPQyxPQUFPLEdBQUc7SUFDZnZHO0lBQ0FPO0lBQ0FjO0lBQ0EyQjtJQUNBWTtJQUNBSTtJQUNBVztJQUNBNUM7SUFDQVM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hpZ3VlcmFhenVyZWZ1bmN0aW9uLy4vbGliL3V0aWxzLmpzPzhhMWYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVXNlIGNvbmRpdGlvbmFsIGltcG9ydHMgZm9yIHNlcnZlci1zaWRlIG9ubHkgbW9kdWxlc1xubGV0IERlZmF1bHRBenVyZUNyZWRlbnRpYWxDbGFzcyA9IG51bGw7XG5sZXQgdHJhY2tFeGNlcHRpb25GbiA9IG51bGw7XG5cbi8vIE9ubHkgaW1wb3J0IHNlcnZlci1zaWRlIG1vZHVsZXMgd2hlbiBydW5uaW5nIG9uIHRoZSBzZXJ2ZXJcbmlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICB0cnkge1xuICAgIGNvbnN0IHsgRGVmYXVsdEF6dXJlQ3JlZGVudGlhbCB9ID0gcmVxdWlyZSgnQGF6dXJlL2lkZW50aXR5Jyk7XG4gICAgY29uc3QgeyB0cmFja0V4Y2VwdGlvbiB9ID0gcmVxdWlyZSgnLi9tb25pdG9yaW5nU2VydmljZScpO1xuICAgIFxuICAgIERlZmF1bHRBenVyZUNyZWRlbnRpYWxDbGFzcyA9IERlZmF1bHRBenVyZUNyZWRlbnRpYWw7XG4gICAgdHJhY2tFeGNlcHRpb25GbiA9IHRyYWNrRXhjZXB0aW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGltcG9ydGluZyBzZXJ2ZXItc2lkZSBtb2R1bGVzOicsIGVycm9yKTtcbiAgfVxufVxuXG4vLyBSZXVzYWJsZSBlcnJvciB0eXBlc1xuY2xhc3MgQXBwRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXR1c0NvZGUgPSA1MDApIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnQXBwRXJyb3InO1xuICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbn1cblxuLy8gUmV0cnkgbG9naWMgd2l0aCBleHBvbmVudGlhbCBiYWNrb2ZmXG5hc3luYyBmdW5jdGlvbiB3aXRoUmV0cnkob3BlcmF0aW9uLCBtYXhSZXRyaWVzID0gMywgYmFzZURlbGF5ID0gMTAwMCkge1xuICBsZXQgbGFzdEVycm9yO1xuICBcbiAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsYXN0RXJyb3IgPSBlcnJvcjtcbiAgICAgIFxuICAgICAgaWYgKCFpc1JldHJ5YWJsZUVycm9yKGVycm9yKSB8fCBhdHRlbXB0ID09PSBtYXhSZXRyaWVzIC0gMSkge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLm1pbihiYXNlRGVsYXkgKiBNYXRoLnBvdygyLCBhdHRlbXB0KSArIE1hdGgucmFuZG9tKCkgKiAxMDAwLCAxMDAwMCk7XG4gICAgICBcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyAmJiB0cmFja0V4Y2VwdGlvbkZuKSB7XG4gICAgICAgIHRyYWNrRXhjZXB0aW9uRm4oZXJyb3IsIHtcbiAgICAgICAgICBvcGVyYXRpb246ICdyZXRyeScsXG4gICAgICAgICAgYXR0ZW1wdDogYXR0ZW1wdC50b1N0cmluZygpLFxuICAgICAgICAgIG5leHREZWxheTogZGVsYXkudG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgc2xlZXAoZGVsYXkpO1xuICAgIH1cbiAgfVxuICBcbiAgdGhyb3cgbGFzdEVycm9yO1xufVxuXG5mdW5jdGlvbiBpc1JldHJ5YWJsZUVycm9yKGVycm9yKSB7XG4gIGNvbnN0IHJldHJ5YWJsZUNvZGVzID0gWzQwOCwgNDI5LCA1MDAsIDUwMiwgNTAzLCA1MDRdO1xuICBjb25zdCByZXRyeWFibGVNZXNzYWdlcyA9IFtcbiAgICAnRVRJTUVET1VUJyxcbiAgICAnRUNPTk5SRVNFVCcsXG4gICAgJ0VDT05OUkVGVVNFRCcsXG4gICAgJ0VQSVBFJyxcbiAgICAnRUhPU1RVTlJFQUNIJyxcbiAgICAnRU5FVFVOUkVBQ0gnLFxuICAgICdFU09DS0VUVElNRURPVVQnXG4gIF07XG5cbiAgcmV0dXJuIChcbiAgICByZXRyeWFibGVDb2Rlcy5pbmNsdWRlcyhlcnJvci5zdGF0dXNDb2RlKSB8fFxuICAgIHJldHJ5YWJsZU1lc3NhZ2VzLmluY2x1ZGVzKGVycm9yLmNvZGUpIHx8XG4gICAgZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0aW1lb3V0JykgfHxcbiAgICBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ25ldHdvcmsnKSB8fFxuICAgIGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygndGVtcG9yYXJpbHkgdW5hdmFpbGFibGUnKVxuICApO1xufVxuXG5mdW5jdGlvbiBzbGVlcChtcykge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59XG5cbi8vIEVuaGFuY2VkIGVycm9yIHJlc3BvbnNlIGZvcm1hdHRlclxuZnVuY3Rpb24gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvcikge1xuICBjb25zdCByZXNwb25zZSA9IHtcbiAgICBlcnJvcjoge1xuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIHR5cGU6IGVycm9yLm5hbWUsXG4gICAgICBzdGF0dXNDb2RlOiBlcnJvci5zdGF0dXNDb2RlIHx8IDUwMFxuICAgIH1cbiAgfTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICByZXNwb25zZS5lcnJvci5zdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIHJlc3BvbnNlLmVycm9yLmRldGFpbHMgPSBlcnJvci5kZXRhaWxzO1xuICB9XG5cbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG4vLyBBcHBsaWNhdGlvbiBJbnNpZ2h0cyBpbnRlZ3JhdGlvblxuY29uc3QgYXBwSW5zaWdodHNFbmFibGVkID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgJiYgISFwcm9jZXNzLmVudi5BUFBMSUNBVElPTklOU0lHSFRTX0NPTk5FQ1RJT05fU1RSSU5HO1xuXG5mdW5jdGlvbiBsb2dFcnJvcihlcnJvciwgY29udGV4dCA9IHt9KSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyAmJiB0cmFja0V4Y2VwdGlvbkZuKSB7XG4gICAgdHJhY2tFeGNlcHRpb25GbihlcnJvciwge1xuICAgICAgLi4uY29udGV4dCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZXJyb3JOYW1lOiBlcnJvci5uYW1lLFxuICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgc3RhY2tUcmFjZTogZXJyb3Iuc3RhY2tcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzYW5pdGl6ZUlucHV0KGlucHV0KSB7XG4gIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGlucHV0XG4gICAgICAucmVwbGFjZSgvWzw+XS9nLCAnJylcbiAgICAgIC5yZXBsYWNlKC9qYXZhc2NyaXB0Oi9naSwgJycpXG4gICAgICAucmVwbGFjZSgvb25cXHcrPS9naSwgJycpXG4gICAgICAudHJpbSgpO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgcmV0dXJuIGlucHV0Lm1hcChzYW5pdGl6ZUlucHV0KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmIGlucHV0ICE9PSBudWxsKSB7XG4gICAgY29uc3Qgc2FuaXRpemVkID0ge307XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaW5wdXQpKSB7XG4gICAgICBzYW5pdGl6ZWRba2V5XSA9IHNhbml0aXplSW5wdXQodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gc2FuaXRpemVkO1xuICB9XG4gIHJldHVybiBpbnB1dDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVFbWFpbChlbWFpbCkge1xuICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XG4gIHJldHVybiB0eXBlb2YgZW1haWwgPT09ICdzdHJpbmcnICYmIGVtYWlsUmVnZXgudGVzdChlbWFpbCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdERhc2hib2FyZERhdGEoZGF0YSkge1xuICB0cnkge1xuICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHRocm93IG5ldyBBcHBFcnJvcignSW52YWxpZCBkYXNoYm9hcmQgZGF0YScsIDQwMCk7XG4gICAgfVxuXG4gICAgY29uc3Qga3BpU2VjdGlvbiA9IGZvcm1hdEtQSVNlY3Rpb24oZGF0YS5rcGlzKTtcbiAgICBjb25zdCBpc3N1ZXNTZWN0aW9uID0gZm9ybWF0SXNzdWVzU2VjdGlvbihkYXRhLmlzc3Vlcyk7XG4gICAgY29uc3Qgc2NoZWR1bGVTZWN0aW9uID0gZm9ybWF0U2NoZWR1bGVTZWN0aW9uKGRhdGEuc2NoZWR1bGUpO1xuXG4gICAgcmV0dXJuIGAke2twaVNlY3Rpb259JHtpc3N1ZXNTZWN0aW9ufSR7c2NoZWR1bGVTZWN0aW9ufWA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnICYmIHRyYWNrRXhjZXB0aW9uRm4pIHtcbiAgICAgIHRyYWNrRXhjZXB0aW9uRm4oZXJyb3IsIHsgb3BlcmF0aW9uOiAnZm9ybWF0RGFzaGJvYXJkRGF0YScgfSk7XG4gICAgfVxuICAgIHRocm93IG5ldyBBcHBFcnJvcignRXJyb3IgZm9ybWF0dGluZyBkYXNoYm9hcmQgZGF0YScsIDUwMCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0S1BJU2VjdGlvbihrcGlzKSB7XG4gIGlmICgha3BpcyB8fCB0eXBlb2Yga3BpcyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgQXBwRXJyb3IoJ0ludmFsaWQgS1BJIGRhdGEnLCA0MDApO1xuICB9XG5cbiAgcmV0dXJuIGBcbkhJR1VFUkEgUFJPSkVDVCAtIEVYRUNVVElWRSBTVU1NQVJZXG5cbktFWSBNRVRSSUNTOlxu4oCiIFRvdGFsIEJ1ZGdldDogJHtmb3JtYXRDdXJyZW5jeShrcGlzLnRvdGFsQnVkZ2V0KX1cbuKAoiBTcGVudDogJHtmb3JtYXRDdXJyZW5jeShrcGlzLnNwZW50KX1cbuKAoiBSZW1haW5pbmc6ICR7Zm9ybWF0Q3VycmVuY3koa3Bpcy5yZW1haW5pbmcpfVxu4oCiIE92ZXJydW4gUmlzazogJHtrcGlzLnJpc2t9XG5gO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRJc3N1ZXNTZWN0aW9uKGlzc3Vlcykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoaXNzdWVzKSkge1xuICAgIHRocm93IG5ldyBBcHBFcnJvcignSW52YWxpZCBpc3N1ZXMgZGF0YScsIDQwMCk7XG4gIH1cblxuICBjb25zdCByZWNlbnRJc3N1ZXMgPSBpc3N1ZXNcbiAgICAuc2xpY2UoMCwgNSlcbiAgICAubWFwKGlzc3VlID0+IGBcbuKAoiAke2lzc3VlLmRhdGV9IC0gJHtpc3N1ZS5zeXN0ZW19XG4gIElzc3VlOiAke3Nhbml0aXplSW5wdXQoaXNzdWUuaXNzdWUpfVxuICBJbXBhY3Q6ICR7c2FuaXRpemVJbnB1dChpc3N1ZS5pbXBhY3QpfVxuICBBY2NvdW50YWJpbGl0eTogJHtzYW5pdGl6ZUlucHV0KGlzc3VlLmFjY291bnRhYmlsaXR5KX1gKVxuICAgIC5qb2luKCdcXG4nKTtcblxuICByZXR1cm4gYFxuUkVDRU5UIElTU1VFUzoke3JlY2VudElzc3Vlc31gO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRTY2hlZHVsZVNlY3Rpb24oc2NoZWR1bGUpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVkdWxlKSkge1xuICAgIHRocm93IG5ldyBBcHBFcnJvcignSW52YWxpZCBzY2hlZHVsZSBkYXRhJywgNDAwKTtcbiAgfVxuXG4gIGNvbnN0IHNjaGVkdWxlSXRlbXMgPSBzY2hlZHVsZVxuICAgIC5tYXAoaXRlbSA9PiBg4oCiICR7c2FuaXRpemVJbnB1dChpdGVtLnRhc2spfTogUGxhbiAke2l0ZW0uUGxhbm5lZH0lIHZzIEFjdHVhbCAke2l0ZW0uQWN0dWFsfSVgKVxuICAgIC5qb2luKCdcXG4nKTtcblxuICByZXR1cm4gYFxuU0NIRURVTEUgU1RBVFVTOlxuJHtzY2hlZHVsZUl0ZW1zfVxuXG5Gb3IgZGV0YWlsZWQgY2hhcnRzIGFuZCB2aXN1YWxpemF0aW9ucywgcGxlYXNlIHZpc2l0IHRoZSBwcm9qZWN0IGRhc2hib2FyZC5cbmA7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEN1cnJlbmN5KG51bWJlcikge1xuICBpZiAodHlwZW9mIG51bWJlciAhPT0gJ251bWJlcicgfHwgaXNOYU4obnVtYmVyKSkge1xuICAgIHRocm93IG5ldyBBcHBFcnJvcignSW52YWxpZCBjdXJyZW5jeSB2YWx1ZScsIDQwMCk7XG4gIH1cblxuICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1VUycsIHtcbiAgICBzdHlsZTogJ2N1cnJlbmN5JyxcbiAgICBjdXJyZW5jeTogJ1VTRCcsXG4gICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAwLFxuICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMFxuICB9KS5mb3JtYXQobnVtYmVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEFwcEVycm9yLFxuICB3aXRoUmV0cnksXG4gIHNsZWVwLFxuICBzYW5pdGl6ZUlucHV0LFxuICB2YWxpZGF0ZUVtYWlsLFxuICBmb3JtYXREYXNoYm9hcmREYXRhLFxuICBmb3JtYXRDdXJyZW5jeSxcbiAgZm9ybWF0RXJyb3JSZXNwb25zZSxcbiAgbG9nRXJyb3Jcbn07Il0sIm5hbWVzIjpbIkRlZmF1bHRBenVyZUNyZWRlbnRpYWxDbGFzcyIsInRyYWNrRXhjZXB0aW9uRm4iLCJEZWZhdWx0QXp1cmVDcmVkZW50aWFsIiwicmVxdWlyZSIsInRyYWNrRXhjZXB0aW9uIiwiZXJyb3IiLCJjb25zb2xlIiwiQXBwRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJuYW1lIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJ3aXRoUmV0cnkiLCJvcGVyYXRpb24iLCJtYXhSZXRyaWVzIiwiYmFzZURlbGF5IiwibGFzdEVycm9yIiwiYXR0ZW1wdCIsImlzUmV0cnlhYmxlRXJyb3IiLCJkZWxheSIsIk1hdGgiLCJtaW4iLCJwb3ciLCJyYW5kb20iLCJ0b1N0cmluZyIsIm5leHREZWxheSIsInNsZWVwIiwicmV0cnlhYmxlQ29kZXMiLCJyZXRyeWFibGVNZXNzYWdlcyIsImluY2x1ZGVzIiwiY29kZSIsInRvTG93ZXJDYXNlIiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJmb3JtYXRFcnJvclJlc3BvbnNlIiwicmVzcG9uc2UiLCJ0eXBlIiwicHJvY2VzcyIsInN0YWNrIiwiZGV0YWlscyIsImFwcEluc2lnaHRzRW5hYmxlZCIsImVudiIsIkFQUExJQ0FUSU9OSU5TSUdIVFNfQ09OTkVDVElPTl9TVFJJTkciLCJsb2dFcnJvciIsImNvbnRleHQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvck5hbWUiLCJlcnJvck1lc3NhZ2UiLCJzdGFja1RyYWNlIiwic2FuaXRpemVJbnB1dCIsImlucHV0IiwicmVwbGFjZSIsInRyaW0iLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJzYW5pdGl6ZWQiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJ2YWxpZGF0ZUVtYWlsIiwiZW1haWwiLCJlbWFpbFJlZ2V4IiwidGVzdCIsImZvcm1hdERhc2hib2FyZERhdGEiLCJkYXRhIiwia3BpU2VjdGlvbiIsImZvcm1hdEtQSVNlY3Rpb24iLCJrcGlzIiwiaXNzdWVzU2VjdGlvbiIsImZvcm1hdElzc3Vlc1NlY3Rpb24iLCJpc3N1ZXMiLCJzY2hlZHVsZVNlY3Rpb24iLCJmb3JtYXRTY2hlZHVsZVNlY3Rpb24iLCJzY2hlZHVsZSIsImZvcm1hdEN1cnJlbmN5IiwidG90YWxCdWRnZXQiLCJzcGVudCIsInJlbWFpbmluZyIsInJpc2siLCJyZWNlbnRJc3N1ZXMiLCJzbGljZSIsImlzc3VlIiwiZGF0ZSIsInN5c3RlbSIsImltcGFjdCIsImFjY291bnRhYmlsaXR5Iiwiam9pbiIsInNjaGVkdWxlSXRlbXMiLCJpdGVtIiwidGFzayIsIlBsYW5uZWQiLCJBY3R1YWwiLCJudW1iZXIiLCJpc05hTiIsIkludGwiLCJOdW1iZXJGb3JtYXQiLCJzdHlsZSIsImN1cnJlbmN5IiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwibWF4aW11bUZyYWN0aW9uRGlnaXRzIiwiZm9ybWF0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/utils.js\n");

/***/ }),

/***/ "(api)/./pages/api/dashboardData.js":
/*!************************************!*\
  !*** ./pages/api/dashboardData.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_cacheService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/cacheService */ \"(api)/./lib/cacheService.ts\");\n\n// Mock data for development\nconst mockProjectData = {\n    totalBudget: 150000,\n    budgetUsed: 65000,\n    tasksCompleted: 24,\n    totalTasks: 42,\n    projectProgress: 57,\n    nextMilestone: \"2025-05-15\",\n    recentUpdates: [\n        {\n            date: \"2025-04-15\",\n            description: \"Phase 1 completed\"\n        },\n        {\n            date: \"2025-04-10\",\n            description: \"Infrastructure deployment\"\n        },\n        {\n            date: \"2025-04-05\",\n            description: \"Design approval\"\n        }\n    ],\n    taskDistribution: {\n        \"Not Started\": 10,\n        \"In Progress\": 8,\n        \"Completed\": 24\n    },\n    resourceAllocation: {\n        development: 65,\n        testing: 40,\n        deployment: 25\n    },\n    monthlyHours: [\n        {\n            month: \"Jan\",\n            hours: 120\n        },\n        {\n            month: \"Feb\",\n            hours: 150\n        },\n        {\n            month: \"Mar\",\n            hours: 180\n        },\n        {\n            month: \"Apr\",\n            hours: 210\n        }\n    ]\n};\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        const cacheKey = \"dashboardData\";\n        // Try to get cached data first using cacheService.get\n        const cachedData = await _lib_cacheService__WEBPACK_IMPORTED_MODULE_0__.cacheService.get(cacheKey);\n        if (cachedData) {\n            // Assuming cachedData is already an object, no need to parse\n            return res.status(200).json(cachedData);\n        }\n        // Simplify: Always use mock data for now, remove config/monitoring calls\n        const dashboardData = mockProjectData;\n        // Cache the data for 5 minutes using cacheService.set\n        // Ensure the value is stringified if cacheService expects a string\n        await _lib_cacheService__WEBPACK_IMPORTED_MODULE_0__.cacheService.set(cacheKey, dashboardData, 5 * 60);\n        return res.status(200).json(dashboardData);\n    } catch (error) {\n        console.error(\"Dashboard API error:\", error);\n        return res.status(500).json({\n            message: \"Failed to retrieve dashboard data\",\n            // Use error.message directly if available\n            error:  true && error instanceof Error ? error.message : undefined\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZGFzaGJvYXJkRGF0YS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzRDtBQUV0RCw0QkFBNEI7QUFDNUIsTUFBTUMsa0JBQWtCO0lBQ3RCQyxhQUFhO0lBQ2JDLFlBQVk7SUFDWkMsZ0JBQWdCO0lBQ2hCQyxZQUFZO0lBQ1pDLGlCQUFpQjtJQUNqQkMsZUFBZTtJQUNmQyxlQUFlO1FBQ2I7WUFBRUMsTUFBTTtZQUFjQyxhQUFhO1FBQW9CO1FBQ3ZEO1lBQUVELE1BQU07WUFBY0MsYUFBYTtRQUE0QjtRQUMvRDtZQUFFRCxNQUFNO1lBQWNDLGFBQWE7UUFBa0I7S0FDdEQ7SUFDREMsa0JBQWtCO1FBQ2hCLGVBQWU7UUFDZixlQUFlO1FBQ2YsYUFBYTtJQUNmO0lBQ0FDLG9CQUFvQjtRQUNsQkMsYUFBYTtRQUNiQyxTQUFTO1FBQ1RDLFlBQVk7SUFDZDtJQUNBQyxjQUFjO1FBQ1o7WUFBRUMsT0FBTztZQUFPQyxPQUFPO1FBQUk7UUFDM0I7WUFBRUQsT0FBTztZQUFPQyxPQUFPO1FBQUk7UUFDM0I7WUFBRUQsT0FBTztZQUFPQyxPQUFPO1FBQUk7UUFDM0I7WUFBRUQsT0FBTztZQUFPQyxPQUFPO1FBQUk7S0FDNUI7QUFDSDtBQUVlLGVBQWVDLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssT0FBTztRQUN4QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBcUI7SUFDOUQ7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsV0FBVztRQUNqQixzREFBc0Q7UUFDdEQsTUFBTUMsYUFBYSxNQUFNM0IsMkRBQVlBLENBQUM0QixHQUFHLENBQUNGO1FBQzFDLElBQUlDLFlBQVk7WUFDZCw2REFBNkQ7WUFDN0QsT0FBT04sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ0c7UUFDOUI7UUFFQSx5RUFBeUU7UUFDekUsTUFBTUUsZ0JBQWdCNUI7UUFFdEIsc0RBQXNEO1FBQ3RELG1FQUFtRTtRQUNuRSxNQUFNRCwyREFBWUEsQ0FBQzhCLEdBQUcsQ0FBQ0osVUFBVUcsZUFBZSxJQUFJO1FBRXBELE9BQU9SLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNLO0lBQzlCLEVBQUUsT0FBT0UsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxPQUFPVixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1QsMENBQTBDO1lBQzFDTSxPQUFPRSxLQUF5QixJQUFpQkYsaUJBQWlCRyxRQUFRSCxNQUFNTixPQUFPLEdBQUdVO1FBQzVGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hpZ3VlcmFhenVyZWZ1bmN0aW9uLy4vcGFnZXMvYXBpL2Rhc2hib2FyZERhdGEuanM/ZGUwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjYWNoZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9saWIvY2FjaGVTZXJ2aWNlJztcblxuLy8gTW9jayBkYXRhIGZvciBkZXZlbG9wbWVudFxuY29uc3QgbW9ja1Byb2plY3REYXRhID0ge1xuICB0b3RhbEJ1ZGdldDogMTUwMDAwLFxuICBidWRnZXRVc2VkOiA2NTAwMCxcbiAgdGFza3NDb21wbGV0ZWQ6IDI0LFxuICB0b3RhbFRhc2tzOiA0MixcbiAgcHJvamVjdFByb2dyZXNzOiA1NyxcbiAgbmV4dE1pbGVzdG9uZTogJzIwMjUtMDUtMTUnLFxuICByZWNlbnRVcGRhdGVzOiBbXG4gICAgeyBkYXRlOiAnMjAyNS0wNC0xNScsIGRlc2NyaXB0aW9uOiAnUGhhc2UgMSBjb21wbGV0ZWQnIH0sXG4gICAgeyBkYXRlOiAnMjAyNS0wNC0xMCcsIGRlc2NyaXB0aW9uOiAnSW5mcmFzdHJ1Y3R1cmUgZGVwbG95bWVudCcgfSxcbiAgICB7IGRhdGU6ICcyMDI1LTA0LTA1JywgZGVzY3JpcHRpb246ICdEZXNpZ24gYXBwcm92YWwnIH1cbiAgXSxcbiAgdGFza0Rpc3RyaWJ1dGlvbjoge1xuICAgICdOb3QgU3RhcnRlZCc6IDEwLFxuICAgICdJbiBQcm9ncmVzcyc6IDgsXG4gICAgJ0NvbXBsZXRlZCc6IDI0XG4gIH0sXG4gIHJlc291cmNlQWxsb2NhdGlvbjoge1xuICAgIGRldmVsb3BtZW50OiA2NSxcbiAgICB0ZXN0aW5nOiA0MCxcbiAgICBkZXBsb3ltZW50OiAyNVxuICB9LFxuICBtb250aGx5SG91cnM6IFtcbiAgICB7IG1vbnRoOiAnSmFuJywgaG91cnM6IDEyMCB9LFxuICAgIHsgbW9udGg6ICdGZWInLCBob3VyczogMTUwIH0sXG4gICAgeyBtb250aDogJ01hcicsIGhvdXJzOiAxODAgfSxcbiAgICB7IG1vbnRoOiAnQXByJywgaG91cnM6IDIxMCB9XG4gIF1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gJ2Rhc2hib2FyZERhdGEnO1xuICAgIC8vIFRyeSB0byBnZXQgY2FjaGVkIGRhdGEgZmlyc3QgdXNpbmcgY2FjaGVTZXJ2aWNlLmdldFxuICAgIGNvbnN0IGNhY2hlZERhdGEgPSBhd2FpdCBjYWNoZVNlcnZpY2UuZ2V0KGNhY2hlS2V5KTtcbiAgICBpZiAoY2FjaGVkRGF0YSkge1xuICAgICAgLy8gQXNzdW1pbmcgY2FjaGVkRGF0YSBpcyBhbHJlYWR5IGFuIG9iamVjdCwgbm8gbmVlZCB0byBwYXJzZVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGNhY2hlZERhdGEpO1xuICAgIH1cblxuICAgIC8vIFNpbXBsaWZ5OiBBbHdheXMgdXNlIG1vY2sgZGF0YSBmb3Igbm93LCByZW1vdmUgY29uZmlnL21vbml0b3JpbmcgY2FsbHNcbiAgICBjb25zdCBkYXNoYm9hcmREYXRhID0gbW9ja1Byb2plY3REYXRhO1xuXG4gICAgLy8gQ2FjaGUgdGhlIGRhdGEgZm9yIDUgbWludXRlcyB1c2luZyBjYWNoZVNlcnZpY2Uuc2V0XG4gICAgLy8gRW5zdXJlIHRoZSB2YWx1ZSBpcyBzdHJpbmdpZmllZCBpZiBjYWNoZVNlcnZpY2UgZXhwZWN0cyBhIHN0cmluZ1xuICAgIGF3YWl0IGNhY2hlU2VydmljZS5zZXQoY2FjaGVLZXksIGRhc2hib2FyZERhdGEsIDUgKiA2MCk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oZGFzaGJvYXJkRGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGFzaGJvYXJkIEFQSSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHJldHJpZXZlIGRhc2hib2FyZCBkYXRhJyxcbiAgICAgIC8vIFVzZSBlcnJvci5tZXNzYWdlIGRpcmVjdGx5IGlmIGF2YWlsYWJsZVxuICAgICAgZXJyb3I6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogdW5kZWZpbmVkXG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiY2FjaGVTZXJ2aWNlIiwibW9ja1Byb2plY3REYXRhIiwidG90YWxCdWRnZXQiLCJidWRnZXRVc2VkIiwidGFza3NDb21wbGV0ZWQiLCJ0b3RhbFRhc2tzIiwicHJvamVjdFByb2dyZXNzIiwibmV4dE1pbGVzdG9uZSIsInJlY2VudFVwZGF0ZXMiLCJkYXRlIiwiZGVzY3JpcHRpb24iLCJ0YXNrRGlzdHJpYnV0aW9uIiwicmVzb3VyY2VBbGxvY2F0aW9uIiwiZGV2ZWxvcG1lbnQiLCJ0ZXN0aW5nIiwiZGVwbG95bWVudCIsIm1vbnRobHlIb3VycyIsIm1vbnRoIiwiaG91cnMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJjYWNoZUtleSIsImNhY2hlZERhdGEiLCJnZXQiLCJkYXNoYm9hcmREYXRhIiwic2V0IiwiZXJyb3IiLCJjb25zb2xlIiwicHJvY2VzcyIsIkVycm9yIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/dashboardData.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FdashboardData&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FdashboardData.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();