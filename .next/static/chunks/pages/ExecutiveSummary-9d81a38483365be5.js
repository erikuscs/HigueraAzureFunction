(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{9410:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ExecutiveSummary",function(){return a(1726)}])},1405:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var s=a(5893),r=a(7294),n=a(4715),i=a(9984),c=a(7017),o=a(5615),l=a(8793),d=a(4570),u=a(8042),h=a(2764);let m=[{month:"Jan",hours:120,budget:130},{month:"Feb",hours:150,budget:140},{month:"Mar",hours:180,budget:160},{month:"Apr",hours:210,budget:200}];function g(){let[e,t]=(0,r.useState)([]),[a,g]=(0,r.useState)(!0),[x,p]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(async()=>{try{setTimeout(()=>{t(m),g(!1)},500)}catch(e){console.error("Error fetching hours data:",e),p("Failed to load hours tracking data"),g(!1)}})()},[]),a)?(0,s.jsx)("div",{className:"flex justify-center items-center h-40",children:"Loading chart data..."}):x?(0,s.jsxs)("div",{className:"text-red-500 text-center h-40",children:["Error: ",x]}):(0,s.jsxs)("div",{className:"w-full h-80",children:[(0,s.jsx)(n.h,{width:"100%",height:"100%",children:(0,s.jsxs)(i.v,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[(0,s.jsx)(c.q,{strokeDasharray:"3 3"}),(0,s.jsx)(o.K,{dataKey:"month"}),(0,s.jsx)(l.B,{}),(0,s.jsx)(d.u,{formatter:(e,t)=>["".concat(e," hours"),t.charAt(0).toUpperCase()+t.slice(1)]}),(0,s.jsx)(u.D,{}),(0,s.jsx)(h.$,{name:"Actual Hours",dataKey:"hours",fill:"#3B82F6"}),(0,s.jsx)(h.$,{name:"Budgeted Hours",dataKey:"budget",fill:"#10B981"})]})}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Hours"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:e.reduce((e,t)=>e+t.hours,0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Budgeted Hours"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:e.reduce((e,t)=>e+t.budget,0)})]})]})]})}},7865:function(e){"use strict";class t extends Error{constructor(e,t=500){super(e),this.name="AppError",this.statusCode=t,Error.captureStackTrace(this,this.constructor)}}async function a(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;for(let n=0;n<a;n++)try{return await e()}catch(i){if(t=i,!([408,429,500,502,503,504].includes(i.statusCode)||["ETIMEDOUT","ECONNRESET","ECONNREFUSED","EPIPE","EHOSTUNREACH","ENETUNREACH","ESOCKETTIMEDOUT"].includes(i.code)||i.message.toLowerCase().includes("timeout")||i.message.toLowerCase().includes("network")||i.message.toLowerCase().includes("temporarily unavailable"))||n===a-1)throw i;let e=Math.min(r*Math.pow(2,n)+1e3*Math.random(),1e4);await s(e)}throw t}function s(e){return new Promise(t=>setTimeout(t,e))}function r(e){if("string"==typeof e)return e.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim();if(Array.isArray(e))return e.map(r);if("object"==typeof e&&null!==e){let t={};for(let[a,s]of Object.entries(e))t[a]=r(s);return t}return e}function n(e){if("number"!=typeof e||isNaN(e))throw new t("Invalid currency value",400);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}e.exports={AppError:t,withRetry:a,sleep:s,sanitizeInput:r,validateEmail:function(e){return"string"==typeof e&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},formatDashboardData:function(e){try{if(!e||"object"!=typeof e)throw new t("Invalid dashboard data",400);let a=function(e){if(!e||"object"!=typeof e)throw new t("Invalid KPI data",400);return"\nHIGUERA PROJECT - EXECUTIVE SUMMARY\n\nKEY METRICS:\n• Total Budget: ".concat(n(e.totalBudget),"\n• Spent: ").concat(n(e.spent),"\n• Remaining: ").concat(n(e.remaining),"\n• Overrun Risk: ").concat(e.risk,"\n")}(e.kpis),s=function(e){if(!Array.isArray(e))throw new t("Invalid issues data",400);let a=e.slice(0,5).map(e=>"\n• ".concat(e.date," - ").concat(e.system,"\n  Issue: ").concat(r(e.issue),"\n  Impact: ").concat(r(e.impact),"\n  Accountability: ").concat(r(e.accountability))).join("\n");return"\nRECENT ISSUES:".concat(a)}(e.issues),i=function(e){if(!Array.isArray(e))throw new t("Invalid schedule data",400);let a=e.map(e=>"• ".concat(r(e.task),": Plan ").concat(e.Planned,"% vs Actual ").concat(e.Actual,"%")).join("\n");return"\nSCHEDULE STATUS:\n".concat(a,"\n\nFor detailed charts and visualizations, please visit the project dashboard.\n")}(e.schedule);return"".concat(a).concat(s).concat(i)}catch(e){throw new t("Error formatting dashboard data",500)}},formatCurrency:n,formatErrorResponse:function(e){return{error:{message:e.message,type:e.name,statusCode:e.statusCode||500}}},logError:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}},1726:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return U}});var s=a(5893),r=a(7294),n=a(4715),i=a(723),c=a(7017),o=a(5615),l=a(8793),d=a(4570),u=a(1712),h=a(9984),m=a(2764),g=a(3591),x=a(4155);class p{static getInstance(){return p.instance||(p.instance=new p),p.instance}initializeAppInsights(){this.initialized||x.env.APPLICATIONINSIGHTS_CONNECTION_STRING}initializeLogAnalytics(){}trackException(e,t){}trackEvent(e,t){}trackMetric(e,t,a){}trackRequest(e,t,a,s,r){}trackDependency(e,t,a,s,r){}async queryLogs(e,t){return null}startOperation(e){return null}stopOperation(e){}constructor(){this.initialized=!1}}let b=p.getInstance(),j=(e,t)=>b.trackException(e,t),y=(e,t)=>b.trackEvent(e,t);a(7865);var f=a(4155);class w{async initializeRedis(){try{let e=f.env.REDIS_CONNECTION_STRING;if(!e)throw Error("Redis connection string is not configured");this.client=null.createClient({url:e,socket:{tls:!0,reconnectStrategy:e=>e>this.MAX_RETRY_ATTEMPTS?Error("Redis max retries reached"):Math.min(this.INITIAL_RETRY_DELAY*Math.pow(1.5,e),this.MAX_RETRY_DELAY),connectTimeout:15e3}}),this.client.on("error",e=>{this.isConnected=!1,this.scheduleReconnect()}),this.client.on("connect",()=>{this.isConnected=!0,this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null)}),this.client.on("reconnecting",()=>{}),await this.client.connect()}catch(e){this.isConnected=!1,this.scheduleReconnect()}}scheduleReconnect(){this.connectionTimeout||(this.connectionTimeout=setTimeout(()=>{this.connectionTimeout=null,this.initializeRedis().catch(e=>{})},5e3))}async get(e){return null}async set(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}async delete(e){}constructor(){this.isConnected=!1,this.connectionTimeout=null,this.MAX_RETRY_ATTEMPTS=10,this.INITIAL_RETRY_DELAY=100,this.MAX_RETRY_DELAY=5e3}}class N{async get(e){let t=this.cache.get(e);return t?Date.now()>t.expiry?(this.cache.delete(e),null):t.value:null}async set(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,s=Date.now()+1e3*a;this.cache.set(e,{value:t,expiry:s}),this.cache.size>100&&this.cleanup()}async delete(e){this.cache.delete(e)}cleanup(){let e=Date.now();for(let[t,a]of this.cache.entries())e>a.expiry&&this.cache.delete(t)}constructor(){this.cache=new Map}}class k{static getInstance(){return k.instance||(k.instance=new k),k.instance}async get(e){try{return await this.primaryCache.get(e)}catch(t){return this.fallbackCache.get(e)}}async set(e,t,a){try{await this.primaryCache.set(e,t,a)}catch(s){await this.fallbackCache.set(e,t,a)}}async delete(e){try{await this.primaryCache.delete(e)}catch(t){await this.fallbackCache.delete(e)}}constructor(){this.fallbackCache=new N,this.primaryCache=f.env.REDIS_CONNECTION_STRING?new w:this.fallbackCache}}let v=k.getInstance();var T=a(4155);let E={auth:{clientId:T.env.NEXT_PUBLIC_AZURE_AD_CLIENT_ID,authority:"https://login.microsoftonline.com/".concat(T.env.NEXT_PUBLIC_AZURE_AD_TENANT_ID),redirectUri:window.location.origin,postLogoutRedirectUri:window.location.origin},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{allowNativeBroker:!1,loggerOptions:{loggerCallback:(e,t,a)=>{if(!a)switch(e){case 0:j(Error(t));break;case 2:console.info(t);break;case 3:console.debug(t)}},logLevel:2}}};class S{static getInstance(){return S.instance||(S.instance=new S),S.instance}async initialize(){try{await this.msalInstance.initialize(),await this.msalInstance.handleRedirectPromise();let e=this.msalInstance.getAllAccounts();e.length>0&&(this.currentAccount=e[0],y("auth_initialized",{success:"true"}))}catch(e){throw j(e,{operation:"auth_initialize"}),e}}async login(){try{await this.msalInstance.loginRedirect({scopes:["User.Read","Mail.Send"]}),y("auth_login_initiated")}catch(e){throw j(e,{operation:"auth_login"}),e}}async logout(){try{await this.msalInstance.logoutRedirect(),this.currentAccount=null,y("auth_logout")}catch(e){throw j(e,{operation:"auth_logout"}),e}}async acquireToken(e){let t="token_".concat(e.join("_"));try{let a=await v.get(t);if(a)return a;if(!this.currentAccount)throw Error("No active account");let s=await this.msalInstance.acquireTokenSilent({scopes:e,account:this.currentAccount});return await v.set(t,s.accessToken,3300),s.accessToken}catch(a){if(a instanceof Error&&a.message.includes("interaction_required")){let a=await this.msalInstance.acquireTokenPopup({scopes:e});return await v.set(t,a.accessToken,3300),a.accessToken}throw j(a,{operation:"acquire_token",scopes:e.join(",")}),a}}getAccount(){return this.currentAccount}isAuthenticated(){return null!==this.currentAccount}constructor(){this.currentAccount=null,this.msalInstance=new g.Lx(E)}}let C=S.getInstance();var D=a(1405),A=e=>{let{tasks:t,onTaskUpdated:a}=e,[n,i]=(0,r.useState)(""),[c,o]=(0,r.useState)(""),[l,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[x,p]=(0,r.useState)(""),b=async e=>{if(e.preventDefault(),!n){g("Please select a task");return}if(!c||c<0||c>100){g("Percentage must be between 0 and 100");return}if(!l||l<=0){g("Hours logged must be greater than 0");return}h(!0),g(""),p("");try{let e=await C.acquireToken(["api://211478db-e6e4-4752-a627-00a64033eb85/Tasks.ReadWrite"]).catch(e=>{throw Error("Authentication failed. Please sign in again.")}),t=await fetch("/api/updateTask",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({taskName:n,actualPercentage:Number(c),hoursLogged:Number(l)})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update task")}let s=await t.json();p("Task updated successfully. New projected completion date: ".concat(new Date(s.hoursTracking.projectedEndDate).toLocaleDateString())),i(""),o(""),d(""),a&&a(s)}catch(e){console.error("Task update error:",e),g(e instanceof Error?e.message:"Failed to update task")}finally{h(!1)}};return(0,s.jsxs)("div",{className:"task-update-form bg-white p-4 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Update Task Completion"}),m&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded-lg mb-4",children:m}),x&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-2 rounded-lg mb-4",children:x}),(0,s.jsx)("form",{onSubmit:b,children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"task",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Task"}),(0,s.jsxs)("select",{id:"task",value:n,onChange:e=>i(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",disabled:u,children:[(0,s.jsx)("option",{value:"",children:"Select a task..."}),t.map(e=>(0,s.jsxs)("option",{value:e.task,children:[e.task," (Current: ",e.Actual,"%)"]},e.task))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"percentage",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Completion Percentage"}),(0,s.jsx)("input",{id:"percentage",type:"number",min:"0",max:"100",value:c,onChange:e=>o(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"e.g., 75",disabled:u})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"hours",className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours Logged"}),(0,s.jsx)("input",{id:"hours",type:"number",min:"0.5",step:"0.5",value:l,onChange:e=>d(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"e.g., 8",disabled:u})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{type:"submit",disabled:u,className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded",children:u?"Updating...":"Update Task"})})]})}),(0,s.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:(0,s.jsx)("p",{children:"Updating task completion will recalculate the projected completion date."})})]})},I=e=>{let{onHoursLogged:t}=e,[a,n]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[o,l]=(0,r.useState)({monday:0,tuesday:0,wednesday:0,thursday:0,friday:0}),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(""),p=e=>e.toISOString().split("T")[0],b=(e,t)=>{l({...o,[e]:Number(t)||0})},j=()=>Object.values(o).reduce((e,t)=>e+t,0),y=async e=>{e.preventDefault(),setStatus("Submitting..."),m(null);try{let e=await C.acquireToken(["api://211478db-e6e4-4752-a627-00a64033eb85/Hours.Log"]).catch(e=>{throw Error("Authentication failed. Please sign in again.")}),t=await fetch("".concat("http://localhost:7071","/api/logWorkerHours"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({workerName:a,weekEnding:i,hours:o,totalHours:j()})});if(!t.ok){let e=await t.json().catch(()=>({message:"Failed to log hours. Invalid response from server."}));throw Error(e.message||"HTTP error! status: ".concat(t.status))}let s=await t.json();setStatus("Hours logged successfully: ".concat(s.message))}catch(e){m(e.message||"An unexpected error occurred."),setStatus("Error"),trackException(e,{operation:"WorkerHoursForm_Submit"})}};return(0,s.jsxs)("div",{className:"worker-hours-form bg-white p-4 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Log Worker Hours"}),h&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded-lg mb-4",children:h}),g&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-2 rounded-lg mb-4",children:g}),(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Worker Name"}),(0,s.jsxs)("select",{value:a,onChange:e=>n(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",disabled:d,children:[(0,s.jsx)("option",{value:"",children:"Select worker..."}),["Worker 1","Worker 2","Worker 3","Worker 4"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Week Ending"}),(0,s.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",disabled:d,children:[(0,s.jsx)("option",{value:"",children:"Select date..."}),(()=>{let e=[],t=new Date(new Date);t.setDate(t.getDate()+(12-t.getDay())%7);for(let a=0;a<4;a++)e.push(new Date(t)),t.setDate(t.getDate()+7);return e})().map(e=>(0,s.jsx)("option",{value:p(e),children:p(e)},p(e)))]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Hours"}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-2",children:["monday","tuesday","wednesday","thursday","friday"].map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1 capitalize",children:e}),(0,s.jsx)("input",{type:"number",min:"0",max:"24",step:"0.5",value:o[e],onChange:t=>b(e,t.target.value),className:"w-full p-2 border border-gray-300 rounded-md",disabled:d})]},e))})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Total hours:"})," ",j()]}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded",children:d?"Submitting...":"Log Hours"})]})]})]})},R=a(1664),_=a.n(R);let L=e=>{let{children:t,...a}=e;return(0,s.jsx)("button",{...a,className:"px-4 py-2 rounded-lg ".concat(a.disabled?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"," text-white ").concat(a.className||""),children:t})},P=e=>{let{children:t,...a}=e;return(0,s.jsx)("div",{...a,className:"rounded-2xl shadow ".concat(a.className||""),children:t})},O=e=>{let{children:t,...a}=e;return(0,s.jsx)("div",{...a,className:"p-4 ".concat(a.className||""),children:t})};function U(){let[e,t]=(0,r.useState)(null),[a,g]=(0,r.useState)(""),[x,p]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[y,f]=(0,r.useState)(!1),[w,N]=(0,r.useState)(""),[k,v]=(0,r.useState)(!1),[T,E]=(0,r.useState)(!1),[S,R]=(0,r.useState)("");(0,r.useEffect)(()=>{fetch("".concat("/","/data/data.json")).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));return e.json()}).then(e=>{t(e),g(new Date().toLocaleDateString());let a=new Date("2025-01-20"),s=Math.floor((new Date().getTime()-a.getTime())/6048e5)+1,r="Week ".concat(s);e.weeklyCost.find(e=>e.week===r)&&p(r)}).catch(e=>{console.error("Failed to load data.json",e),N("⚠️ Could not find or read /public/data/data.json. Please verify that the file exists and is valid JSON.")})},[]),(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search);e.has("week")&&p(e.get("week")),e.has("system")&&j(e.get("system"))},[]);let U=async()=>{if(!e){N("No dashboard data available");return}f(!0),N(""),v(!1),performance.now();try{let t=await C.acquireToken(["Mail.Send"]).catch(e=>{throw console.error("Authentication error:",e),Error("Authentication failed. Please sign in again.")}),a=await fetch("/api/sendEmail",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({dashboardData:e})});if(!a.ok){let e=await a.text();throw Error(e||"Failed to send email report")}performance.now(),v(!0),setTimeout(()=>v(!1),5e3)}catch(e){console.error("Email report error:",e),N(e instanceof Error&&e.message.includes("Authentication failed")?"⚠️ Authentication error. Please sign in and try again.":e instanceof Error?"⚠️ ".concat(e.message):"⚠️ An unknown error occurred while sending the email.")}finally{f(!1)}},H=async()=>{t(null);let e=performance.now();try{let a=await fetch("".concat("/","/data/data.json"));if(!a.ok)throw Error("Failed to fetch dashboard data");let s=await a.json();t(s),console.log("Data refreshed in ".concat(performance.now()-e,"ms"))}catch(e){console.error("Failed to fetch data:",e),N(e.message)}},F=async()=>{E(!0);try{let t=await fetch("/api/generatePdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dashboardData:e,filters:{week:x,system:b}})});if(!t.ok)throw Error("Failed to generate PDF");let a=await t.blob(),s=window.URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download="higuera-summary-".concat(new Date().toISOString().split("T")[0],".pdf"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),document.body.removeChild(r)}catch(e){console.error("PDF generation failed:",e),N("Failed to generate PDF report")}finally{E(!1)}};if(!e)return(0,s.jsx)("div",{className:"p-6 text-gray-500",children:"Loading dashboard..."});let M=[...new Set(e.weeklyCost.map(e=>e.week))],B=[...new Set(e.issues.map(e=>e.system))],z=x?e.weeklyCost.filter(e=>e.week===x):e.weeklyCost,K=b?e.issues.filter(e=>e.system===b):e.issues;return(0,s.jsxs)("div",{className:"p-6 space-y-8 bg-white text-gray-800 font-sans",children:[(0,s.jsx)(()=>(0,s.jsx)("nav",{className:"bg-blue-800 text-white py-3 px-6 mb-6 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"font-bold text-xl",children:"Higuera Azure Project"}),(0,s.jsxs)("div",{className:"flex space-x-6",children:[(0,s.jsx)(_(),{href:"/ExecutiveSummary",children:(0,s.jsx)("span",{className:"hover:text-blue-200 font-medium cursor-pointer",children:"Executive Summary"})}),(0,s.jsx)(_(),{href:"/dashboard",children:(0,s.jsx)("span",{className:"hover:text-blue-200 font-medium cursor-pointer",children:"Azure Dashboard"})})]})]})}),{}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-b pb-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-blue-900",children:"Executive Summary"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(L,{onClick:H,className:"bg-gray-600 hover:bg-gray-700",children:"\uD83D\uDD04 Refresh"}),(0,s.jsx)(L,{onClick:()=>{p(null),j(null)},className:"bg-gray-600 hover:bg-gray-700",disabled:!x&&!b,children:"❌ Clear Filters"}),(0,s.jsx)(L,{onClick:()=>{let e=function(e,t){let a=new URLSearchParams;return e&&a.set("week",e),t&&a.set("system",t),"".concat(window.location.origin).concat(window.location.pathname,"?").concat(a.toString())}(x,b);R(e),navigator.clipboard.writeText(e).then(()=>alert("Link copied to clipboard!")).catch(console.error)},className:"bg-green-600 hover:bg-green-700",children:"\uD83D\uDD17 Share"}),(0,s.jsx)(L,{onClick:F,disabled:T,className:"bg-purple-600 hover:bg-purple-700",children:T?"Generating...":"\uD83D\uDCE5 Download PDF"}),(0,s.jsx)("a",{href:"/api/exportExcel",target:"_blank",className:"px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:"\uD83D\uDCCA Export Excel"}),(0,s.jsx)(L,{onClick:U,disabled:y,className:"bg-blue-600 hover:bg-blue-700",children:y?"Sending...":"\uD83D\uDCE7 Send Email"})]}),(0,s.jsx)("img",{src:"/ADI_Logo.png",alt:"ADI Logo",className:"h-14"})]})]}),S&&(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-2 rounded-lg",children:["Link copied to clipboard!",(0,s.jsx)("button",{onClick:()=>R(""),className:"float-right text-blue-500 hover:text-blue-700",children:"✕"})]}),w&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded-lg",children:w}),k&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-2 rounded-lg",children:"Email report sent successfully!"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total Budget",value:"$".concat(e.kpis.totalBudget.toLocaleString())},{label:"Spent",value:"$".concat(e.kpis.spent.toLocaleString())},{label:"Remaining",value:"$".concat(e.kpis.remaining.toLocaleString())},{label:"Overrun Risk",value:e.kpis.risk,color:"text-red-500"}].map((e,t)=>(0,s.jsx)(P,{children:(0,s.jsxs)(O,{children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide",children:e.label}),(0,s.jsx)("div",{className:"text-3xl font-bold ".concat(e.color||"text-gray-900"),children:e.value})]})},t))}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 mt-2",children:[M.map((e,t)=>(0,s.jsx)(L,{onClick:()=>p(x===e?null:e),className:x===e?"bg-blue-600":"bg-white text-blue-700 border-blue-500 border",children:e},t)),B.map((e,t)=>(0,s.jsx)(L,{onClick:()=>j(b===e?null:e),className:b===e?"bg-green-600":"bg-white text-green-700 border-green-500 border",children:e},t))]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(P,{children:(0,s.jsxs)(O,{children:[(0,s.jsx)("h3",{className:"text-md font-semibold text-blue-800 mb-2",children:"Cost Over Time"}),(0,s.jsx)(n.h,{width:"100%",height:220,children:(0,s.jsxs)(i.w,{data:z,children:[(0,s.jsx)(c.q,{strokeDasharray:"3 3"}),(0,s.jsx)(o.K,{dataKey:"week"}),(0,s.jsx)(l.B,{}),(0,s.jsx)(d.u,{}),(0,s.jsx)(u.x,{type:"monotone",dataKey:"AdjustedTotalCost",stroke:"#2563eb"}),(0,s.jsx)(u.x,{type:"monotone",dataKey:"TotalWeeklyCost",stroke:"#10b981"})]})})]})}),(0,s.jsx)(P,{children:(0,s.jsxs)(O,{children:[(0,s.jsx)("h3",{className:"text-md font-semibold text-blue-800 mb-2",children:"Budget Breakdown"}),(0,s.jsx)(n.h,{width:"100%",height:220,children:(0,s.jsxs)(h.v,{data:e.breakdown,children:[(0,s.jsx)(c.q,{strokeDasharray:"3 3"}),(0,s.jsx)(o.K,{dataKey:"type"}),(0,s.jsx)(l.B,{}),(0,s.jsx)(d.u,{}),(0,s.jsx)(m.$,{dataKey:"cost",fill:"#2563eb"})]})})]})})]}),(0,s.jsxs)("div",{className:"pt-10",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"Schedule Tracker"}),(0,s.jsx)(P,{children:(0,s.jsx)(O,{children:(0,s.jsx)(n.h,{width:"100%",height:300,children:(0,s.jsxs)(h.v,{data:e.schedule,children:[(0,s.jsx)(c.q,{strokeDasharray:"3 3"}),(0,s.jsx)(o.K,{dataKey:"task"}),(0,s.jsx)(l.B,{}),(0,s.jsx)(d.u,{}),(0,s.jsx)(m.$,{dataKey:"Planned",fill:"#93c5fd"}),(0,s.jsx)(m.$,{dataKey:"Actual",fill:"#fca5a5"})]})})})})]}),(0,s.jsxs)("div",{className:"pt-10",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"Hours Tracking & Forecasting"}),(0,s.jsx)(P,{children:(0,s.jsx)(O,{children:e.hoursTracking?(0,s.jsx)(D.Z,{hoursData:e.hoursTracking}):(0,s.jsx)("div",{className:"p-4 bg-gray-50 text-gray-600 rounded",children:"No hours tracking data available"})})})]}),(0,s.jsxs)("div",{className:"pt-10",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"Task Updates"}),(0,s.jsx)(P,{children:(0,s.jsx)(O,{children:(0,s.jsx)(A,{tasks:e.schedule,onTaskUpdated:a=>{t({...e,schedule:e.schedule.map(e=>e.task===a.task.task?a.task:e),hoursTracking:a.hoursTracking})}})})})]}),(0,s.jsxs)("div",{className:"pt-10",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"Worker Hours Tracker"}),(0,s.jsx)(P,{children:(0,s.jsx)(O,{children:(0,s.jsx)(I,{onHoursLogged:a=>{t({...e,workerHours:a.workerHours,hoursTracking:a.hoursTracking})}})})})]}),(0,s.jsxs)("div",{className:"pt-10",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"Root Cause Matrix"}),(0,s.jsx)(P,{children:(0,s.jsx)(O,{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left table-auto",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-blue-50 text-blue-800 border-b",children:[(0,s.jsx)("th",{className:"pr-4 pb-2",children:"Date"}),(0,s.jsx)("th",{className:"pr-4 pb-2",children:"Issue"}),(0,s.jsx)("th",{className:"pr-4 pb-2",children:"System"}),(0,s.jsx)("th",{className:"pr-4 pb-2",children:"Impact"}),(0,s.jsx)("th",{className:"pr-4 pb-2",children:"Accountability"}),(0,s.jsx)("th",{className:"pb-2",children:"Consequence"})]})}),(0,s.jsx)("tbody",{children:K.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"pr-4 py-2",children:e.date}),(0,s.jsx)("td",{className:"pr-4 py-2",children:e.issue}),(0,s.jsx)("td",{className:"pr-4 py-2",children:e.system}),(0,s.jsx)("td",{className:"pr-4 py-2",children:e.impact}),(0,s.jsx)("td",{className:"pr-4 py-2",children:e.accountability}),(0,s.jsx)("td",{className:"py-2",children:e.consequence})]},t))})]})})})]}),(0,s.jsxs)("div",{className:"pt-10 border-t pt-4 text-sm text-gray-500",children:["Project Higuera Oversight Report | Ayala Development Inc.",(0,s.jsx)("br",{}),"Version: ","v1.0.0"," — Last Updated: ",a]})]})}}},function(e){e.O(0,[792,691,888,774,179],function(){return e(e.s=9410)}),_N_E=e.O()}]);